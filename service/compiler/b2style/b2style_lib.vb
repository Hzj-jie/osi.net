Option Explicit On
Option Infer Off
Option Strict On
Imports osi.root.connector
Public NotInheritable Class b2style_lib
    Private Sub New()
    End Sub
    Public Shared ReadOnly data() As Byte = 
        Convert.FromBase64String(strcat_hint(CUInt(25661), 
            "CAAAAGFzc2VydC5oQAIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQVNTRVJUX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3N0ZGlvLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvc3RyLmg+Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYsIHN0cmluZyBtc2cpIHsKICBpZiAodikgcmV0dXJuOwogIGlmIChic3R5bGU6OnN0cl9lbXB0eShzdGF0ZW1lbnQpKSB7CiAgICBiMnN0eWxlOjpzdGRfb3V0KG1zZyk7CiAgfSBlbHNlIHsKICAgIGIyc3R5bGU6OnN0ZF9vdXQoc3RhdGVtZW50ICsgIjogIiArIG1zZyk7CiAgfQogIGxvZ2ljICJzdG9wIjsKfQoKdm9pZCBhc3NlcnQoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0KCIiLCB2LCBtc2cpOwp9Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYpIHsKICBhc3NlcnQoc3RhdGVtZW50LCB2LCAiQXNzZXJ0aW9uIGZhaWx1cmUiKTsKfQoKdm9pZCBhc3NlcnQoYm9vbCB2KSB7CiAgYXNzZXJ0KCIiLCB2KTsKfQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9BU1NFUlRfSAkAAABiMnN0eWxlLmi7AAAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfSA0KI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0gNCg0KI2luY2x1ZGUgPGJzdHlsZS5oPg0KDQojaW5jbHVkZSA8YjJzdHlsZS9vcGVyYXRvcnMuaD4NCiNpbmNsdWRlIDxiMnN0eWxlL3VmbG9hdC5oPg0KDQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfSAcAAABydW4uY21kawAAAA0KZGVsIC9zICoudW5+DQouLlwuLlwuLlxyZXNvdXJjZVxnZW5cdGFyX2dlblxvc2kucm9vdC51dHQgdGFyX2dlbiAtLW91dHB1dD1iMnN0eWxlX2xpYg0KbW92ZSAvWSAqLnZiIC4uXA0KCQAAAHRlc3RpbmcuaIUBAAAKI2lmbmRlZiBURVNUSU5HX1RFU1RJTkdfSAojZGVmaW5lIFRFU1RJTkdfVEVTVElOR19ICgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8dGVzdGluZy90eXBlcy5oPgojaW5jbHVkZSA8dGVzdGluZy9hc3NlcnQuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKbmFtZXNwYWNlIHRlc3RpbmcgewoKdm9pZCBmaW5pc2hlZCgpIHsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlRvdGFsIGFzc2VydGlvbnM6ICIpOwogIDo6YjJzdHlsZTo6c3RkX291dChfYXNzZXJ0aW9uX2NvdW50KTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlxuIik7Cn0KCn0gIC8vIG5hbWVzcGFjZSB0ZXN0aW5nCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIFRFU1RJTkdfVEVTVElOR19IChMAAABiMnN0eWxlL2RlbGVnYXRlcy5omAcAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfREVMRUdBVEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0RFTEVHQVRFU19ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdGVtcGxhdGUgPFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbigpOwoKdGVtcGxhdGUgPFQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihUKTsKCnRlbXBsYXRlIDxULCBUMiwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDkpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTApOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSwgVDE2LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1LCBUMTYpOwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9ERUxFR0FURVNfSBIAAABiMnN0eWxlL2hlYXBfcHRyLmgiBAAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7CgovLyBUeXBlIFQgaXMgcmVxdWlyZWQgdG8gdXNlIHRoZSBkZWFsbG9jIGluc3RydWN0aW9uLgp0ZW1wbGF0ZSA8VD4KY2xhc3MgaGVhcF9wdHIgewogIFQgX2E7CiAgaW50IF9zOwoKICBpbnQgc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLl9zOwogIH0KCiAgYm9vbCBlbXB0eSgpIHsKICAgIHJldHVybiB0aGlzLnNpemUoKSA9PSAwOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoKSB7CiAgICB0aGlzLl9zID0gMDsKICB9CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICBpZiAodGhpcy5lbXB0eSgpKSByZXR1cm47CiAgICBkZWFsbG9jKHRoaXMuX2EpOwogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICB9CgogIHZvaWQgYWxsb2MoaW50IHNpemUpIHsKICAgIHRoaXMuZGVzdHJ1Y3QoKTsKICAgIDo6YXNzZXJ0KHNpemUgPiAwKTsKICAgIFQgeFtzaXplXTsKICAgIHRoaXMuX2EgPSB4OwogICAgdGhpcy5fcyA9IHNpemU7CiAgICB1bmRlZmluZSh4KTsKICB9CgogIHZvaWQgY29uc3RydWN0KGludCBzaXplKSB7CiAgICB0aGlzLmNvbnN0cnVjdCgpOwogICAgdGhpcy5hbGxvYyhzaXplKTsKICB9CgogIFQgZ2V0KGludCBpbmRleCkgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCk7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpKTsKICAgIHJldHVybiB0aGlzLl9hW2luZGV4XTsKICB9CgogIHZvaWQgc2V0KGludCBpbmRleCwgVCB2KSB7CiAgICA6OmFzc2VydChpbmRleCA+PSAwKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCkpOwogICAgdGhpcy5fYVtpbmRleF0gPSB2OwogIH0KCiAgdm9pZCByZWxlYXNlKCkgewogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICB9Cn07Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX0hFQVBfUFRSX0gXAAAAYjJzdHlsZS9sb2FkZWRfbWV0aG9kLmhmAgAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0xPQURFRF9NRVRIT0RfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9sb2FkX21ldGhvZC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdm9pZCBsb2FkX21ldGhvZChzdHJpbmcgbSkgewogIDo6YnN0eWxlOjpsb2FkX21ldGhvZChtKTsKfQoKdGVtcGxhdGUgPFQ+ClQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kKCkgewogIFQgcmVzdWx0OwogIGxvZ2ljICJpbnRlcnJ1cHQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdGVtcGxhdGUgPFQsIFJUPgpSVCBleGVjdXRlX2xvYWRlZF9tZXRob2QoVCBwKSB7CiAgUlQgcmVzdWx0OwogIGxvZ2ljICJpbnRlcnJ1cHQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kIGIyc3R5bGVfX3AgYjJzdHlsZV9fcmVzdWx0IjsKICByZXR1cm4gcmVzdWx0Owp9CgkKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gTAAAAYjJzdHlsZS9vcGVyYXRvcnMuaMEhAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9PUEVSQVRPUlNfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9pbnQuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCmJvb2wgYW5kKGJvb2wgaSwgYm9vbCBqKSB7CiAgaWYgKGkpIHJldHVybiBqOwogIHJldHVybiBmYWxzZTsKfQoKYm9vbCBvcihib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gdHJ1ZTsKICBpZiAoaikgcmV0dXJuIHRydWU7CiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sIG5vdChib29sIGkpIHsKICBpZiAoaSkgcmV0dXJuIGZhbHNlOwogIHJldHVybiB0cnVlOwp9CgovLyBUT0RPOiBDb25zaWRlciB0byBhdm9pZCBhZGRpbmcgIl9wcmUiIGZvciBvcGVyYXRvciAhLgpib29sIG5vdF9wcmUoYm9vbCBpKSB7CiAgcmV0dXJuIG5vdChpKTsKfQoKYm9vbCBlcXVhbChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnN0cl9lcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwoc3RyaW5nIGksIHN0cmluZyBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gOjpic3R5bGU6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIHJldHVybiBub3QoZXF1YWwoaSwgaikpOwp9Cgpib29sIGVxdWFsKGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIDo6YnN0eWxlOjplcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gOjpic3R5bGU6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gajsKICByZXR1cm4gIWo7Cn0KCmJvb2wgbm90X2VxdWFsKGJvb2wgaSwgYm9vbCBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl90aGFuKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYm9vbCByZXN1bHQ7CiAgbG9naWMgIm1vcmUgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBncmVhdGVyX3RoYW4obG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gZ3JlYXRlcl90aGFuKDo6YnN0eWxlOjp0b19iaWd1aW50KGkpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJvb2wgZ3JlYXRlcl90aGFuKGludCBpLCBpbnQgaikgewogIHJldHVybiBncmVhdGVyX3RoYW4oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oYmlndWludCBpLCBiaWd1aW50IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAibGVzcyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIGxlc3NfdGhhbihsb25nIGksIGxvbmcgaikgewogIHJldHVybiBsZXNzX3RoYW4oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oaW50IGksIGludCBqKSB7CiAgcmV0dXJuIGxlc3NfdGhhbig6OmJzdHlsZTo6dG9fYmlndWludChpKSwgOjpic3R5bGU6OnRvX2JpZ3VpbnQoaikpOwp9Cgpib29sIGxlc3Nfb3JfZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gb3IobGVzc190aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgbGVzc19vcl9lcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKGludCBpLCBpbnQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgcmV0dXJuIG9yKGdyZWF0ZXJfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl9vcl9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJpZ3VpbnQgYWRkKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmxvbmcgYWRkKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IGFkZChpbnQgaSwgaW50IGopIHsKICBsb2dpYyAiYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJ5dGUgYWRkKGJ5dGUgaSwgYnl0ZSBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fYnl0ZShpKTsKfQoKc3RyaW5nIGFkZChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnN0cl9jb25jYXQoaSwgaik7Cn0KCmJpZ3VpbnQgbWludXMoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgpsb25nIG1pbnVzKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgbWludXMoaW50IGksIGludCBqKSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgbXVsdGlwbHkoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAibXVsdGlwbHkgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgpsb25nIG11bHRpcGx5KGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgbXVsdGlwbHkoaW50IGksIGludCBqKSB7CiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgZGl2aWRlKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpsb25nIGRpdmlkZShsb25nIGksIGxvbmcgaikgewogIGxvbmcgcmVzdWx0OwogIGxvZ2ljICJkaXZpZGUgYjJzdHlsZV9fcmVzdWx0IEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhyZXN1bHQpOwp9CgppbnQgZGl2aWRlKGludCBpLCBpbnQgaikgewogIGludCByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQocmVzdWx0KTsKfQoKYmlndWludCBtb2QoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHJlc3VsdDsKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiByZXN1bHQ7Cn0KCmxvbmcgbW9kKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9uZyByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKHJlc3VsdCk7Cn0KCmludCBtb2QoaW50IGksIGludCBqKSB7CiAgaW50IHJlc3VsdDsKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2ludChyZXN1bHQpOwp9CgpiaWd1aW50IHBvd2VyKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgbG9naWMgInBvd2VyIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKbG9uZyBwb3dlcihsb25nIGksIGxvbmcgaikgewogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IHBvd2VyKGludCBpLCBpbnQgaikgewogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KGkpOwp9CgpiaWd1aW50IGJpdF9hbmQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAiYW5kIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKbG9uZyBiaXRfYW5kKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgImFuZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmludCBiaXRfYW5kKGludCBpLCBpbnQgaikgewogIGxvZ2ljICJhbmQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9CgpiaWd1aW50IGJpdF9vcihiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGxvZ2ljICJvciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmxvbmcgYml0X29yKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgIm9yIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKaW50IGJpdF9vcihpbnQgaSwgaW50IGopIHsKICBsb2dpYyAib3IgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3Bvc3QoYmlndWludCYgeCkgewogIGJpZ3VpbnQgciA9IHg7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiByOwp9Cgpsb25nIHNlbGZfaW5jX3Bvc3QobG9uZyYgeCkgewogIGxvbmcgciA9IHg7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2xvbmcocik7Cn0KCmludCBzZWxmX2luY19wb3N0KGludCYgeCkgewogIGludCByID0geDsKICBsb2dpYyAiYWRkIGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KHIpOwp9CgpiaWd1aW50IHNlbGZfZGVjX3Bvc3QoYmlndWludCYgeCkgewogIGJpZ3VpbnQgciA9IHg7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIHI7Cn0KCmxvbmcgc2VsZl9kZWNfcG9zdChsb25nJiB4KSB7CiAgbG9uZyByID0geDsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKHIpOwp9CgppbnQgc2VsZl9kZWNfcG9zdChpbnQmIHgpIHsKICBpbnQgciA9IHg7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KHIpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3ByZShiaWd1aW50JiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfaW5jX3ByZShsb25nJiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2xvbmcoeCk7Cn0KCmludCBzZWxmX2luY19wcmUoaW50JiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2ludCh4KTsKfQoKYmlndWludCBzZWxmX2RlY19wcmUoYmlndWludCYgeCkgewogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfZGVjX3ByZShsb25nJiB4KSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyh4KTsKfQoKaW50IHNlbGZfZGVjX3ByZShpbnQmIHgpIHsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoeCk7Cn0KCmJpZ3VpbnQgZXh0cmFjdChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcjsKICBsb2dpYyAiZXh0cmFjdCBiMnN0eWxlX19yIEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiByOwp9CgpiaWd1aW50IGV4dHJhY3RfcmVtYWluZGVyKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByOwogIGxvZ2ljICJleHRyYWN0IEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcjsKICBsb2dpYyAibGVmdF9zaGlmdCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiAgbG9naWMgInJpZ2h0X3NoaWZ0IGIyc3R5bGVfX3IgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcjsKfQoKYmlndWludCBsZWZ0X3NoaWZ0KGJpZ3VpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbGVmdF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBpbnQgaikgewogIHJldHVybiByaWdodF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiBsZWZ0X3NoaWZ0KGksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYmlndWludCByaWdodF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiByaWdodF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmludCBsZWZ0X3NoaWZ0KGludCBpLCBpbnQgaikgewogIHJldHVybiA6OmJzdHlsZTo6dG9faW50KAogICAgbGVmdF9zaGlmdCg6OmJzdHlsZTo6dG9fYmlndWludChpKSwKICAgICAgICAgICAgICAgOjpic3R5bGU6OnRvX2JpZ3VpbnQoaikpCiAgKTsKfQoKaW50IHJpZ2h0X3NoaWZ0KGludCBpLCBpbnQgaikgewogIHJldHVybiA6OmJzdHlsZTo6dG9faW50KAogICAgcmlnaHRfc2hpZnQoOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgpsb25nIGxlZnRfc2hpZnQobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnRvX2xvbmcoCiAgICBsZWZ0X3NoaWZ0KDo6YnN0eWxlOjp0b19iaWd1aW50KGkpLAogICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgpsb25nIHJpZ2h0X3NoaWZ0KGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIDo6YnN0eWxlOjp0b19sb25nKAogICAgcmlnaHRfc2hpZnQoOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19IFgAAAGIyc3R5bGUvcmF3X2hlYXBfcHRyLmhIAwAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfUkFXX0hFQVBfUFRSDQojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfUkFXX0hFQVBfUFRSDQoNCiNpbmNsdWRlIDxiMnN0eWxlLmg+DQojaW5jbHVkZSA8YXNzZXJ0Lmg+DQoNCm5hbWVzcGFjZSBiMnN0eWxlIHsNCg0KY2xhc3MgcmF3X2hlYXBfcHRyIHsNCiAgdHlwZV9wdHIgcDsNCg0KICBib29sIGlzX251bGwoKSB7DQogICAgYm9vbCByOw0KICAgIGxvZ2ljICJlbXB0eSBiMnN0eWxlX19yIHRoaXMucCI7DQogICAgcmV0dXJuIHI7DQogIH0NCg0KICB0ZW1wbGF0ZSA8VD4NCiAgVCBnZXQoKSB7DQogICAgdHlwZV9wdHIgdiA9IHRoaXMucDsNCiAgICBzdGF0aWNfY2FzdCh2LCBUKTsNCiAgICByZXR1cm4gdjsNCiAgfQ0KDQogIHZvaWQgc2V0X251bGwoKSB7DQogICAgdHlwZV9wdHIgeDsNCiAgICB0aGlzLnAgPSB4Ow0KICB9DQoNCiAgLy8gVE9ETzogRmluZCBhIGdvb2Qgd2F5IHRvIGF1dG9tYXRpY2FsbHkgZGVhbGxvYyBoZWFwIHJlc291cmNlcy4NCiAgdGVtcGxhdGUgPFQ+DQogIHZvaWQgZGVzdHJ1Y3QoKSB7DQogICAgOjphc3NlcnQoIXRoaXMuaXNfbnVsbCgpKTsNCiAgICBUIHggPSB0aGlzLmdldDxUPigpOw0KICAgIGRlYWxsb2MoeCk7DQogICAgdHlwZV9wdHIgeDsNCiAgICB0aGlzLnAgPSB4Ow0KICB9DQoNCiAgdGVtcGxhdGUgPFQ+DQogIHZvaWQgc2V0KFQgdCkgew0KICAgIHN0YXRpY19jYXN0KHQsIHR5cGVfcHRyKTsNCiAgICB0aGlzLnAgPSB0Ow0KICB9DQp9Ow0KDQp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQ0KDQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfUkFXX0hFQVBfUFRSDQAAAGIyc3R5bGUvcmVmLmg3AwAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9SRUZfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfUkVGX0gKCiNpbmNsdWRlIDxiMnN0eWxlLmg+CiNpbmNsdWRlIDxiMnN0eWxlL2hlYXBfcHRyLmg+CiNpbmNsdWRlIDxhc3NlcnQuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnRlbXBsYXRlIDxUPgpjbGFzcyByZWYgewogIGhlYXBfcHRyPFQ+IF9hOwoKICB2b2lkIGRlc3RydWN0KCkgewogICAgdGhpcy5fYS5kZXN0cnVjdCgpOwogIH0KCiAgYm9vbCBlbXB0eSgpIHsKICAgIHJldHVybiB0aGlzLl9hLmVtcHR5KCk7CiAgfQoKICB2b2lkIHNldChUIHYpIHsKICAgIGlmICh0aGlzLmVtcHR5KCkpIHRoaXMuX2EuYWxsb2MoMSk7CiAgICB0aGlzLl9hLnNldCgwLCB2KTsKICB9CgogIHZvaWQgYWxsb2MoKSB7CiAgICBUIHY7CiAgICB0aGlzLnNldCh2KTsKICB9CgogIFQgZ2V0KCkgewogICAgOjphc3NlcnQoIXRoaXMuZW1wdHkoKSk7CiAgICByZXR1cm4gdGhpcy5fYS5nZXQoMCk7CiAgfQoKICBUIHJlbGVhc2UoKSB7CiAgICBUIHIgPSB0aGlzLmdldCgpOwoJdGhpcy5kZXN0cnVjdCgpOwogICAgcmV0dXJuIHI7CiAgfQoKICB2b2lkIGNvbnN0cnVjdCgpIHt9CgogIHZvaWQgY29uc3RydWN0KFQgdikgewogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICAgIHRoaXMuc2V0KHYpOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QocmVmPFQ+JiBvdGhlcikgewogICAgdGhpcy5jb25zdHJ1Y3Qob3RoZXIucmVsZWFzZSgpKTsKICB9Cn07Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1JFRl9ICg8AAABiMnN0eWxlL3N0ZGlvLmhHAwAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9TVERJT19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9TVERJT19ICgojaW5jbHVkZSA8YjJzdHlsZS90b19zdHIuaD4KI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnZvaWQgc3RkX291dChzdHJpbmcgaSkgewogIGxvZ2ljICJpbnRlcnJ1cHQgc3Rkb3V0IGIyc3R5bGVfX2kgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmciOwp9Cgp2b2lkIHN0ZF9lcnIoc3RyaW5nIGkpIHsKICBsb2dpYyAiaW50ZXJydXB0IHN0ZGVyciBiMnN0eWxlX19pIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIjsKfQoKdGVtcGxhdGUgPFQ+CnZvaWQgc3RkX291dChUIGkpIHsKICBzdGRfb3V0KHRvX3N0cihpKSk7Cn0KCnRlbXBsYXRlIDxUPgp2b2lkIHN0ZF9lcnIoVCBpKSB7CiAgc3RkX2Vycih0b19zdHIoaSkpOwp9CgovLyBUT0RPOiBJbXBsZW1lbnQgdGVtcGxhdGUgaW5mZXJlbmNlLgp2b2lkIHN0ZF9vdXQoYm9vbCBpKSB7CiAgc3RkX291dDxib29sPihpKTsKfQoKdm9pZCBzdGRfZXJyKGJvb2wgaSkgewogIHN0ZF9lcnI8Ym9vbD4oaSk7Cn0KCnZvaWQgc3RkX291dChpbnQgaSkgewogIHN0ZF9vdXQ8aW50PihpKTsKfQoKdm9pZCBzdGRfZXJyKGludCBpKSB7CiAgc3RkX2VycjxpbnQ+KGkpOwp9Cgp2b2lkIHN0ZF9vdXQoYmlndWludCBpKSB7CiAgc3RkX291dDxiaWd1aW50PihpKTsKfQoKdm9pZCBzdGRfZXJyKGJpZ3VpbnQgaSkgewogIHN0ZF9lcnI8YmlndWludD4oaSk7Cn0KCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RESU9fSAoNAAAAYjJzdHlsZS9zdHIuaMUCAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1NUUl9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9TVFJfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKc3RyaW5nIHN0cl9taWQoc3RyaW5nIHMsIGludCBpLCBpbnQgbCkgewogIDo6YXNzZXJ0KF9fU1RBVEVNRU5UX18gKyAiQCIgKyBfX0ZJTEVfXywgKGkgPj0gMCkgJiYgKGwgPj0gMCkpOwogIHN0cmluZyByOwogIGxvZ2ljICJjdXRfbGVuIGIyc3R5bGVfX3IgYjJzdHlsZV9fcyBiMnN0eWxlX19pIGIyc3R5bGVfX2wiOwogIHJldHVybiByOwp9Cgpib29sIHN0cl9lbmRzX3dpdGgoc3RyaW5nIGksIHN0cmluZyBqKSB7CiAgaW50IGlsID0gOjpic3R5bGU6OnN0cl9sZW4oaSk7CiAgaW50IGpsID0gOjpic3R5bGU6OnN0cl9sZW4oaik7CiAgaWYgKGlsIDwgamwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGlsID09IGpsKSB7CiAgICByZXR1cm4gOjpic3R5bGU6OnN0cl9lcXVhbChpLCBqKTsKICB9CiAgc3RyaW5nIHNpID0gc3RyX21pZChpLCBpbCAtIGpsLCBqbCk7CiAgcmV0dXJuIDo6YnN0eWxlOjpzdHJfZXF1YWwoc2ksIGopOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1NUUl9IEAAAAGIyc3R5bGUvdG9fc3RyLmhjBgAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfVE9fU1RSX0gNCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9UT19TVFJfSA0KDQojaW5jbHVkZSA8YjJzdHlsZS9sb2FkZWRfbWV0aG9kLmg+DQojaW5jbHVkZSA8bGltaXRzLmg+DQoNCm5hbWVzcGFjZSBiMnN0eWxlIHsNCg0Kc3RyaW5nIHRvX3N0cihzdHJpbmcgaSkgew0KICByZXR1cm4gaTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihieXRlIGkpIHsNCiAgcmV0dXJuIDo6YnN0eWxlOjp0b19zdHIoaSk7DQp9DQoNCnN0cmluZyB0b19zdHIoYm9vbCBpKSB7DQogIGlmIChpKSByZXR1cm4gIlRydWUiOw0KICByZXR1cm4gIkZhbHNlIjsNCn0NCg0Kc3RyaW5nIGxlZ2FjeV9iaWd1aW50X3RvX3N0cihiaWd1aW50IGkpIHsNCiAgaWYgKGkgPT0gMEwpIHsNCiAgICByZXR1cm4gIjAiOw0KICB9DQogIHN0cmluZyBzOw0KICB3aGlsZSAoaSA+IDBMKSB7DQogICAgaW50IGIgPSA6OmJzdHlsZTo6dG9faW50KG1vZChpLCAxMEwpKTsNCiAgICBpIC89IDEwTDsNCiAgICBiICs9IDQ4Ow0KICAgIHMgPSA6OmJzdHlsZTo6c3RyX2NvbmNhdCg6OmJzdHlsZTo6dG9fc3RyKDo6YnN0eWxlOjp0b19ieXRlKGIpKSwgcyk7DQogIH0NCiAgcmV0dXJuIHM7DQp9DQoNCnN0cmluZyBiaWd1aW50X3RvX3N0cihiaWd1aW50IGkpIHsNCiAgbG9hZF9tZXRob2QoImJpZ191aW50X3RvX3N0ciIpOw0KICByZXR1cm4gZXhlY3V0ZV9sb2FkZWRfbWV0aG9kPGJpZ3VpbnQsIHN0cmluZz4oaSk7DQp9DQoNCnN0cmluZyB0b19zdHIoYmlndWludCBpKSB7DQogIHJldHVybiBiaWd1aW50X3RvX3N0cihpKTsNCn0NCg0KdGVtcGxhdGUgPFQ+DQpzdHJpbmcgYmlndWludF90b19zdHJfZm9yd2FyZChUIGksIFQgTUFYKSB7DQogIGlmIChpIDw9IE1BWCkgew0KICAgIHJldHVybiBiaWd1aW50X3RvX3N0cig6OmJzdHlsZTo6dG9fYmlndWludChpKSk7DQogIH0NCiAgaSAtPSBNQVg7DQogIGkgPSBNQVggLSBpOw0KICBUIF8yID0gMjsNCiAgaSArPSBfMjsNCiAgcmV0dXJuIDo6YnN0eWxlOjpzdHJfY29uY2F0KCItIiwgYmlndWludF90b19zdHIoOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSkpKTsNCn0NCg0Kc3RyaW5nIGludF90b19zdHIoaW50IGkpIHsNCiAgcmV0dXJuIGJpZ3VpbnRfdG9fc3RyX2ZvcndhcmQ8aW50PihpLCA6OklOVF9NQVgpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGludCBpKSB7DQogIHJldHVybiBpbnRfdG9fc3RyKGkpOw0KfQ0KDQpzdHJpbmcgdWZsb2F0X3RvX3N0cih1ZmxvYXQgaSkgew0KICBsb2FkX21ldGhvZCgiYmlnX3VkZWNfdG9fc3RyIik7DQogIHJldHVybiBleGVjdXRlX2xvYWRlZF9tZXRob2Q8dWZsb2F0LCBzdHJpbmc+KGkpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKHVmbG9hdCBpKSB7DQogIHJldHVybiB1ZmxvYXRfdG9fc3RyKGkpOw0KfQ0KDQpzdHJpbmcgbG9uZ190b19zdHIobG9uZyBpKSB7DQogIHJldHVybiBiaWd1aW50X3RvX3N0cl9mb3J3YXJkPGxvbmc+KGksIDo6TE9OR19NQVgpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGxvbmcgaSkgew0KICByZXR1cm4gbG9uZ190b19zdHIoaSk7DQp9DQoNCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlDQoNCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9UT19TVFJfSA0KDwAAAGIyc3R5bGUvdHlwZXMuaJoBAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1RZUEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1RZUEVTX0gKCiNpbmNsdWRlIDxic3R5bGUvdHlwZXMuaD4KCi8vIFRPRE86IFNlYXJjaCB0eXBlcyBpbiBwYXJlbnQgc2NvcGVzLgpuYW1lc3BhY2UgYjJzdHlsZSB7Cgp0eXBlZGVmIDo6c3RyaW5nIHN0cmluZzsKdHlwZWRlZiA6OnZvaWQgdm9pZDsKdHlwZWRlZiA6OmJvb2wgYm9vbDsKdHlwZWRlZiA6OmJpZ3VpbnQgYmlndWludDsKdHlwZWRlZiA6OmxvbmcgbG9uZzsKdHlwZWRlZiA6OmludCBpbnQ7CnR5cGVkZWYgOjpieXRlIGJ5dGU7CnR5cGVkZWYgOjp1ZmxvYXQgdWZsb2F0OwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9UWVBFU19IChAAAABiMnN0eWxlL3VmbG9hdC5o8wsAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfVUZMT0FUX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1VGTE9BVF9ICgojaW5jbHVkZSA8YjJzdHlsZS9sb2FkZWRfbWV0aG9kLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3N0ZGlvLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3N0ci5oPgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKYm9vbCBlcXVhbCh1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAiZmxvYXRfZXF1YWwgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBub3RfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiAgbG9naWMgImZsb2F0X2VxdWFsIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBub3QocmVzdWx0KTsKfQoKYm9vbCBncmVhdGVyX3RoYW4odWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiAgbG9naWMgImZsb2F0X21vcmUgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIHJldHVybiBvcihncmVhdGVyX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX3RoYW4odWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiAgbG9naWMgImZsb2F0X2xlc3MgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKdWZsb2F0IGFkZCh1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBsb2dpYyAiZmxvYXRfYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKdWZsb2F0IG1pbnVzKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIGxvZ2ljICJmbG9hdF9zdWJ0cmFjdCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCnVmbG9hdCBtdWx0aXBseSh1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBsb2dpYyAiZmxvYXRfbXVsdGlwbHkgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgp1ZmxvYXQgZGl2aWRlKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIHVmbG9hdCByZXN1bHQ7CiAgbG9naWMgImZsb2F0X2RpdmlkZSBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgp1ZmxvYXQgcG93ZXIodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgbG9naWMgImZsb2F0X3Bvd2VyIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKdm9pZCBzdGRfb3V0KHVmbG9hdCBpKSB7CiAgc3RkX291dCh1ZmxvYXRfdG9fc3RyKGkpKTsKfQoKdm9pZCBzdGRfZXJyKHVmbG9hdCBpKSB7CiAgc3RkX2Vycih1ZmxvYXRfdG9fc3RyKGkpKTsKfQoKdWZsb2F0IHNlbGZfaW5jX3Bvc3QodWZsb2F0JiB4KSB7CiAgdWZsb2F0IHIgPSB4OwoJeCA9IGFkZCh4LCAxLjApOwogIHJldHVybiByOwp9Cgp1ZmxvYXQgc2VsZl9kZWNfcG9zdCh1ZmxvYXQmIHgpIHsKICB1ZmxvYXQgciA9IHg7Cgl4ID0gbWludXMoeCwgMS4wKTsKICByZXR1cm4gcjsKfQoKdWZsb2F0IHNlbGZfaW5jX3ByZSh1ZmxvYXQmIHgpIHsKCXggPSBhZGQoeCwgMS4wKTsKICByZXR1cm4geDsKfQoKdWZsb2F0IHNlbGZfZGVjX3ByZSh1ZmxvYXQmIHgpIHsKCXggPSBtaW51cyh4LCAxLjApOwogIHJldHVybiB4Owp9Cgp1ZmxvYXQgdWZsb2F0X19mcm9tKGJpZ3VpbnQgaSkgewogIGxvYWRfbWV0aG9kKCJiaWdfdWludF90b19iaWdfdWRlYyIpOwogIHJldHVybiBleGVjdXRlX2xvYWRlZF9tZXRob2Q8YmlndWludCwgdWZsb2F0PihpKTsKfQoKdWZsb2F0IHVmbG9hdF9fZnJvbShpbnQgaSkgewogIHJldHVybiB1ZmxvYXRfX2Zyb20oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSkpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcm9tKGxvbmcgaSkgewogIHJldHVybiB1ZmxvYXRfX2Zyb20oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSkpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcmFjdGlvbihiaWd1aW50IG4sIGJpZ3VpbnQgZCkgewogIHVmbG9hdCByZXN1bHQgPSB1ZmxvYXRfX2Zyb20obik7CiAgdWZsb2F0IHVkID0gdWZsb2F0X19mcm9tKGQpOwogIHJldHVybiBkaXZpZGUocmVzdWx0LCB1ZCk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2ZyYWN0aW9uKGJpZ3VpbnQgbiwgaW50IGQpIHsKICByZXR1cm4gdWZsb2F0X19mcmFjdGlvbihuLCA6OmJzdHlsZTo6dG9fYmlndWludChkKSk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2ZyYWN0aW9uKGJpZ3VpbnQgbiwgbG9uZyBkKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJhY3Rpb24obiwgOjpic3R5bGU6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcmFjdGlvbihpbnQgbiwgYmlndWludCBkKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJhY3Rpb24oOjpic3R5bGU6OnRvX2JpZ3VpbnQobiksIGQpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcmFjdGlvbihsb25nIG4sIGJpZ3VpbnQgZCkgewogIHJldHVybiB1ZmxvYXRfX2ZyYWN0aW9uKDo6YnN0eWxlOjp0b19iaWd1aW50KG4pLCBkKTsKfQoKdWZsb2F0IHVmbG9hdF9fZnJhY3Rpb24oaW50IG4sIGludCBkKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJhY3Rpb24oOjpic3R5bGU6OnRvX2JpZ3VpbnQobiksIDo6YnN0eWxlOjp0b19iaWd1aW50KGQpKTsKfQoKdWZsb2F0IHVmbG9hdF9fZnJhY3Rpb24obG9uZyBuLCBsb25nIGQpIHsKICByZXR1cm4gdWZsb2F0X19mcmFjdGlvbig6OmJzdHlsZTo6dG9fYmlndWludChuKSwgOjpic3R5bGU6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVUZMT0FUX0gKCwAAAHN0ZC90eXBlcy5oXQEAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1NURF9UWVBFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKCiNpbmNsdWRlIDxic3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBzdGQgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjpiaWd1aW50IGJpZ3VpbnQ7CnR5cGVkZWYgOjpsb25nIGxvbmc7CnR5cGVkZWYgOjppbnQgaW50Owp0eXBlZGVmIDo6Ynl0ZSBieXRlOwp0eXBlZGVmIDo6dWZsb2F0IHVmbG9hdDsKCn0gIC8vIG5hbWVzcGFjZSBzdGQKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKAAAAc3RkL3ZlY3RvchkFAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9TVERfVkVDVE9SCiNkZWZpbmUgQjJTVFlMRV9MSUJfU1REX1ZFQ1RPUgoKI2luY2x1ZGUgPGIyc3R5bGUuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgojaW5jbHVkZSA8YjJzdHlsZS9oZWFwX3B0ci5oPgojaW5jbHVkZSA8c3RkL3R5cGVzLmg+CgpuYW1lc3BhY2Ugc3RkIHsKCnRlbXBsYXRlIDxUPgpjbGFzcyB2ZWN0b3IgewogIDo6YjJzdHlsZTo6aGVhcF9wdHI8VD4gX2E7CiAgaW50IF9zOwoKICBpbnQgc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLl9zOwogIH0KCiAgaW50IGNhcGFjaXR5KCkgewogICAgcmV0dXJuIHRoaXMuX2Euc2l6ZSgpOwogIH0KCiAgVCBnZXQoaW50IGluZGV4KSB7CiAgICA6OmFzc2VydChpbmRleCA+PSAwLCAiZ2V0Iik7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpLCAiZ2V0Iik7CiAgICByZXR1cm4gdGhpcy5fYS5nZXQoaW5kZXgpOwogIH0KCiAgdm9pZCBzZXQoaW50IGluZGV4LCBUIHYpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDAsICJzZXQiKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCksICJzZXQiKTsKICAgIHRoaXMuX2Euc2V0KGluZGV4LCB2KTsKICB9CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICB0aGlzLl9hLmRlc3RydWN0KCk7CiAgfQoKICB2b2lkIHJlc2VydmUoaW50IHNpemUpIHsKICAgIDo6YjJzdHlsZTo6aGVhcF9wdHI8VD4geChzaXplKTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGhpcy5zaXplKCk7IGkrKykgewogICAgICB4LnNldChpLCB0aGlzLmdldChpKSk7CiAgICB9Cgl0aGlzLmRlc3RydWN0KCk7CiAgICB0aGlzLl9hID0geDsKCXgucmVsZWFzZSgpOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoaW50IHNpemUpIHsKICAgIHRoaXMucmVzZXJ2ZShzaXplKTsKICB9CgogIHZvaWQgY29uc3RydWN0KCkgewogICAgdGhpcy5jb25zdHJ1Y3QoNCk7CiAgfQoKICB2b2lkIHB1c2hfYmFjayhUIHYpIHsKICAgIGlmICh0aGlzLnNpemUoKSA9PSB0aGlzLmNhcGFjaXR5KCkpIHsKICAgICAgdGhpcy5yZXNlcnZlKHRoaXMuY2FwYWNpdHkoKSA8PCAxKTsKICAgIH0KICAgIHRoaXMuX3MrKzsKICAgIHRoaXMuc2V0KHRoaXMuc2l6ZSgpIC0gMSwgdik7CiAgfQoKICB2b2lkIHBvcF9iYWNrKCkgewogICAgOjphc3NlcnQodGhpcy5zaXplKCkgPiAwLCAicG9wX2JhY2siKTsKICAgIHRoaXMuX3MtLTsKICB9CgogIHZvaWQgY2xlYXIoKSB7CiAgICB0aGlzLl9zID0gMDsKICB9Cn07Cgp9ICAvLyBuYW1lc3BhY2Ugc3RkCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX1NURF9WRUNUT1IQAAAAdGVzdGluZy9hc3NlcnQuaCgFAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9URVNUSU5HX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfVEVTVElOR19BU1NFUlRfSAoKI2luY2x1ZGUgPGIyc3R5bGUvc3RkaW8uaD4KI2luY2x1ZGUgPGIyc3R5bGUvdG9fc3RyLmg+CiNpbmNsdWRlIDxic3R5bGUuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KI2luY2x1ZGUgPHRlc3RpbmcvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKbmFtZXNwYWNlIHRlc3RpbmcgewoKaW50IF9hc3NlcnRpb25fY291bnQgPSAwOwoKLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gdGVzdCB0aGUgX19GSUxFX18gaW4gaW5jbHVkZWQgZmlsZXMuCnN0cmluZyBhc3NlcnRfX0ZJTEVfXygpIHsKICByZXR1cm4gX19GSUxFX187Cn0KCnZvaWQgYXNzZXJ0X3RydWUoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgX2Fzc2VydGlvbl9jb3VudCsrOwogIHN0cmluZyBwcmVmaXg7CiAgaWYgKHYpIHsKICAgIHByZWZpeCA9ICJTdWNjZXNzOiAiOwogIH0gZWxzZSB7CiAgICBwcmVmaXggPSAiRmFpbHVyZTogIjsKICB9CiAgOjpiMnN0eWxlOjpzdGRfb3V0KHByZWZpeCk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KG1zZyk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJcbiIpOwp9Cgp2b2lkIGFzc2VydF90cnVlKGJvb2wgdikgewogIGFzc2VydF90cnVlKHYsICJubyBleHRyYSBpbmZvcm1hdGlvbi4iKTsKfQoKdm9pZCBhc3NlcnRfZmFsc2UoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0X3RydWUoIXYsIG1zZyk7Cn0KCnZvaWQgYXNzZXJ0X2ZhbHNlKGJvb2wgdikgewogIGFzc2VydF90cnVlKCF2KTsKfQoKLyoKVE9ETzogTWFrZSB0aGlzIHdvcmsuIEN1cnJlbnRseSBhc3NlcnRfZXF1YWxfXzIgY29uZmxpY3RzIHdpdGggdGhlIGZvbGxvd2luZyBvbmUuCnRlbXBsYXRlIDxULCBUMj4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUMiB0Miwgc3RyaW5nIG1zZykgewogIGFzc2VydF90cnVlKHQgPT0gdDIsIG1zZyk7Cn0KKi8KCnRlbXBsYXRlIDxULCBUMj4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUMiB0MikgewogIGFzc2VydF90cnVlKHQgPT0gdDIsIDo6YnN0eWxlOjpzdHJfY29uY2F0KDo6YjJzdHlsZTo6dG9fc3RyKHQpLCAiICE9ICIsIDo6YjJzdHlsZTo6dG9fc3RyKHQyKSkpOwp9Cgp0ZW1wbGF0ZSA8VD4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUIHQyKSB7CiAgYXNzZXJ0X2VxdWFsPFQsIFQ+KHQsIHQyKTsKfQoKfSAgLy8gbmFtZXNwYWNlIHRlc3RpbmcKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfVEVTVElOR19BU1NFUlRfSAoPAAAAdGVzdGluZy90eXBlcy5orgEAAAojaWZuZGVmIEIyU1RZTEVfTElCX1RFU1RJTkdfVFlQRVNfSAojZGVmaW5lIEIyU1RZTEVfTElCX1RFU1RJTkdfVFlQRVNfSAoKI2luY2x1ZGUgPGJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewpuYW1lc3BhY2UgdGVzdGluZyB7Cgp0eXBlZGVmIDo6c3RyaW5nIHN0cmluZzsKdHlwZWRlZiA6OnZvaWQgdm9pZDsKdHlwZWRlZiA6OmJvb2wgYm9vbDsKdHlwZWRlZiA6OmludCBpbnQ7CgovLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byB0ZXN0IHRoZSBfX0ZJTEVfXyBpbiBpbmNsdWRlZCBmaWxlcy4Kc3RyaW5nIHR5cGVzX19GSUxFX18oKSB7CiAgcmV0dXJuIF9fRklMRV9fOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdGVzdGluZwp9ICAvLyBuYWVtc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9URVNUSU5HX1RZUEVTX0g="
        ))
End Class
