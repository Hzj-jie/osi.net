Option Explicit On
Option Infer Off
Option Strict On
Imports osi.root.connector
Public NotInheritable Class b2style_lib
    Private Sub New()
    End Sub
    Public Shared ReadOnly data() As Byte = 
        Convert.FromBase64String(strcat_hint(CUInt(25690), 
            "CAAAAGFzc2VydC5oQAIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQVNTRVJUX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3N0ZGlvLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvc3RyLmg+Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYsIHN0cmluZyBtc2cpIHsKICBpZiAodikgcmV0dXJuOwogIGlmIChic3R5bGU6OnN0cl9lbXB0eShzdGF0ZW1lbnQpKSB7CiAgICBiMnN0eWxlOjpzdGRfb3V0KG1zZyk7CiAgfSBlbHNlIHsKICAgIGIyc3R5bGU6OnN0ZF9vdXQoc3RhdGVtZW50ICsgIjogIiArIG1zZyk7CiAgfQogIGxvZ2ljICJzdG9wIjsKfQoKdm9pZCBhc3NlcnQoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0KCIiLCB2LCBtc2cpOwp9Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYpIHsKICBhc3NlcnQoc3RhdGVtZW50LCB2LCAiQXNzZXJ0aW9uIGZhaWx1cmUiKTsKfQoKdm9pZCBhc3NlcnQoYm9vbCB2KSB7CiAgYXNzZXJ0KCIiLCB2KTsKfQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9BU1NFUlRfSAkAAABiMnN0eWxlLmi7AAAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfSA0KI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0gNCg0KI2luY2x1ZGUgPGJzdHlsZS5oPg0KDQojaW5jbHVkZSA8YjJzdHlsZS9vcGVyYXRvcnMuaD4NCiNpbmNsdWRlIDxiMnN0eWxlL3VmbG9hdC5oPg0KDQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfSAcAAABydW4uY21kawAAAA0KZGVsIC9zICoudW5+DQouLlwuLlwuLlxyZXNvdXJjZVxnZW5cdGFyX2dlblxvc2kucm9vdC51dHQgdGFyX2dlbiAtLW91dHB1dD1iMnN0eWxlX2xpYg0KbW92ZSAvWSAqLnZiIC4uXA0KCQAAAHRlc3RpbmcuaIUBAAAKI2lmbmRlZiBURVNUSU5HX1RFU1RJTkdfSAojZGVmaW5lIFRFU1RJTkdfVEVTVElOR19ICgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8dGVzdGluZy90eXBlcy5oPgojaW5jbHVkZSA8dGVzdGluZy9hc3NlcnQuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKbmFtZXNwYWNlIHRlc3RpbmcgewoKdm9pZCBmaW5pc2hlZCgpIHsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlRvdGFsIGFzc2VydGlvbnM6ICIpOwogIDo6YjJzdHlsZTo6c3RkX291dChfYXNzZXJ0aW9uX2NvdW50KTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlxuIik7Cn0KCn0gIC8vIG5hbWVzcGFjZSB0ZXN0aW5nCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIFRFU1RJTkdfVEVTVElOR19IChMAAABiMnN0eWxlL2RlbGVnYXRlcy5omAcAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfREVMRUdBVEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0RFTEVHQVRFU19ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdGVtcGxhdGUgPFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbigpOwoKdGVtcGxhdGUgPFQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihUKTsKCnRlbXBsYXRlIDxULCBUMiwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDkpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTApOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUpOwoKdGVtcGxhdGUgPFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSwgVDE2LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1LCBUMTYpOwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9ERUxFR0FURVNfSBIAAABiMnN0eWxlL2hlYXBfcHRyLmgiBAAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7CgovLyBUeXBlIFQgaXMgcmVxdWlyZWQgdG8gdXNlIHRoZSBkZWFsbG9jIGluc3RydWN0aW9uLgp0ZW1wbGF0ZSA8VD4KY2xhc3MgaGVhcF9wdHIgewogIFQgX2E7CiAgaW50IF9zOwoKICBpbnQgc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLl9zOwogIH0KCiAgYm9vbCBlbXB0eSgpIHsKICAgIHJldHVybiB0aGlzLnNpemUoKSA9PSAwOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoKSB7CiAgICB0aGlzLl9zID0gMDsKICB9CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICBpZiAodGhpcy5lbXB0eSgpKSByZXR1cm47CiAgICBkZWFsbG9jKHRoaXMuX2EpOwogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICB9CgogIHZvaWQgYWxsb2MoaW50IHNpemUpIHsKICAgIHRoaXMuZGVzdHJ1Y3QoKTsKICAgIDo6YXNzZXJ0KHNpemUgPiAwKTsKICAgIFQgeFtzaXplXTsKICAgIHRoaXMuX2EgPSB4OwogICAgdGhpcy5fcyA9IHNpemU7CiAgICB1bmRlZmluZSh4KTsKICB9CgogIHZvaWQgY29uc3RydWN0KGludCBzaXplKSB7CiAgICB0aGlzLmNvbnN0cnVjdCgpOwogICAgdGhpcy5hbGxvYyhzaXplKTsKICB9CgogIFQgZ2V0KGludCBpbmRleCkgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCk7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpKTsKICAgIHJldHVybiB0aGlzLl9hW2luZGV4XTsKICB9CgogIHZvaWQgc2V0KGludCBpbmRleCwgVCB2KSB7CiAgICA6OmFzc2VydChpbmRleCA+PSAwKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCkpOwogICAgdGhpcy5fYVtpbmRleF0gPSB2OwogIH0KCiAgdm9pZCByZWxlYXNlKCkgewogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICB9Cn07Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX0hFQVBfUFRSX0gXAAAAYjJzdHlsZS9sb2FkZWRfbWV0aG9kLmhmAgAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX0xPQURFRF9NRVRIT0RfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9sb2FkX21ldGhvZC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdm9pZCBsb2FkX21ldGhvZChzdHJpbmcgbSkgewogIDo6YnN0eWxlOjpsb2FkX21ldGhvZChtKTsKfQoKdGVtcGxhdGUgPFQ+ClQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kKCkgewogIFQgcmVzdWx0OwogIGxvZ2ljICJpbnRlcnJ1cHQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKdGVtcGxhdGUgPFQsIFJUPgpSVCBleGVjdXRlX2xvYWRlZF9tZXRob2QoVCBwKSB7CiAgUlQgcmVzdWx0OwogIGxvZ2ljICJpbnRlcnJ1cHQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kIGIyc3R5bGVfX3AgYjJzdHlsZV9fcmVzdWx0IjsKICByZXR1cm4gcmVzdWx0Owp9CgkKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gTAAAAYjJzdHlsZS9vcGVyYXRvcnMuaMEhAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9PUEVSQVRPUlNfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9pbnQuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCmJvb2wgYW5kKGJvb2wgaSwgYm9vbCBqKSB7CiAgaWYgKGkpIHJldHVybiBqOwogIHJldHVybiBmYWxzZTsKfQoKYm9vbCBvcihib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gdHJ1ZTsKICBpZiAoaikgcmV0dXJuIHRydWU7CiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sIG5vdChib29sIGkpIHsKICBpZiAoaSkgcmV0dXJuIGZhbHNlOwogIHJldHVybiB0cnVlOwp9CgovLyBUT0RPOiBDb25zaWRlciB0byBhdm9pZCBhZGRpbmcgIl9wcmUiIGZvciBvcGVyYXRvciAhLgpib29sIG5vdF9wcmUoYm9vbCBpKSB7CiAgcmV0dXJuIG5vdChpKTsKfQoKYm9vbCBlcXVhbChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnN0cl9lcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwoc3RyaW5nIGksIHN0cmluZyBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gOjpic3R5bGU6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIHJldHVybiBub3QoZXF1YWwoaSwgaikpOwp9Cgpib29sIGVxdWFsKGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIDo6YnN0eWxlOjplcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gOjpic3R5bGU6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gajsKICByZXR1cm4gIWo7Cn0KCmJvb2wgbm90X2VxdWFsKGJvb2wgaSwgYm9vbCBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl90aGFuKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYm9vbCByZXN1bHQ7CiAgbG9naWMgIm1vcmUgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBncmVhdGVyX3RoYW4obG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gZ3JlYXRlcl90aGFuKDo6YnN0eWxlOjp0b19iaWd1aW50KGkpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJvb2wgZ3JlYXRlcl90aGFuKGludCBpLCBpbnQgaikgewogIHJldHVybiBncmVhdGVyX3RoYW4oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oYmlndWludCBpLCBiaWd1aW50IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAibGVzcyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIGxlc3NfdGhhbihsb25nIGksIGxvbmcgaikgewogIHJldHVybiBsZXNzX3RoYW4oOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oaW50IGksIGludCBqKSB7CiAgcmV0dXJuIGxlc3NfdGhhbig6OmJzdHlsZTo6dG9fYmlndWludChpKSwgOjpic3R5bGU6OnRvX2JpZ3VpbnQoaikpOwp9Cgpib29sIGxlc3Nfb3JfZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gb3IobGVzc190aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgbGVzc19vcl9lcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKGludCBpLCBpbnQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgcmV0dXJuIG9yKGdyZWF0ZXJfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl9vcl9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJpZ3VpbnQgYWRkKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmxvbmcgYWRkKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IGFkZChpbnQgaSwgaW50IGopIHsKICBsb2dpYyAiYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJ5dGUgYWRkKGJ5dGUgaSwgYnl0ZSBqKSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fYnl0ZShpKTsKfQoKc3RyaW5nIGFkZChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnN0cl9jb25jYXQoaSwgaik7Cn0KCmJpZ3VpbnQgbWludXMoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgpsb25nIG1pbnVzKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgbWludXMoaW50IGksIGludCBqKSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgbXVsdGlwbHkoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAibXVsdGlwbHkgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgpsb25nIG11bHRpcGx5KGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgbXVsdGlwbHkoaW50IGksIGludCBqKSB7CiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgZGl2aWRlKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpsb25nIGRpdmlkZShsb25nIGksIGxvbmcgaikgewogIGxvbmcgcmVzdWx0OwogIGxvZ2ljICJkaXZpZGUgYjJzdHlsZV9fcmVzdWx0IEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhyZXN1bHQpOwp9CgppbnQgZGl2aWRlKGludCBpLCBpbnQgaikgewogIGludCByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQocmVzdWx0KTsKfQoKYmlndWludCBtb2QoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHJlc3VsdDsKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiByZXN1bHQ7Cn0KCmxvbmcgbW9kKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9uZyByZXN1bHQ7CiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKHJlc3VsdCk7Cn0KCmludCBtb2QoaW50IGksIGludCBqKSB7CiAgaW50IHJlc3VsdDsKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2ludChyZXN1bHQpOwp9CgpiaWd1aW50IHBvd2VyKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgbG9naWMgInBvd2VyIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKbG9uZyBwb3dlcihsb25nIGksIGxvbmcgaikgewogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IHBvd2VyKGludCBpLCBpbnQgaikgewogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KGkpOwp9CgpiaWd1aW50IGJpdF9hbmQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBsb2dpYyAiYW5kIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKbG9uZyBiaXRfYW5kKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgImFuZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmludCBiaXRfYW5kKGludCBpLCBpbnQgaikgewogIGxvZ2ljICJhbmQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9CgpiaWd1aW50IGJpdF9vcihiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGxvZ2ljICJvciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCmxvbmcgYml0X29yKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9naWMgIm9yIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKaW50IGJpdF9vcihpbnQgaSwgaW50IGopIHsKICBsb2dpYyAib3IgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3Bvc3QoYmlndWludCYgeCkgewogIGJpZ3VpbnQgciA9IHg7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiByOwp9Cgpsb25nIHNlbGZfaW5jX3Bvc3QobG9uZyYgeCkgewogIGxvbmcgciA9IHg7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2xvbmcocik7Cn0KCmludCBzZWxmX2luY19wb3N0KGludCYgeCkgewogIGludCByID0geDsKICBsb2dpYyAiYWRkIGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KHIpOwp9CgpiaWd1aW50IHNlbGZfZGVjX3Bvc3QoYmlndWludCYgeCkgewogIGJpZ3VpbnQgciA9IHg7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIHI7Cn0KCmxvbmcgc2VsZl9kZWNfcG9zdChsb25nJiB4KSB7CiAgbG9uZyByID0geDsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9sb25nKHIpOwp9CgppbnQgc2VsZl9kZWNfcG9zdChpbnQmIHgpIHsKICBpbnQgciA9IHg7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5faW50KHIpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3ByZShiaWd1aW50JiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfaW5jX3ByZShsb25nJiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2xvbmcoeCk7Cn0KCmludCBzZWxmX2luY19wcmUoaW50JiB4KSB7CiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiA6OmJzdHlsZTo6Zml0X2luX2ludCh4KTsKfQoKYmlndWludCBzZWxmX2RlY19wcmUoYmlndWludCYgeCkgewogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfZGVjX3ByZShsb25nJiB4KSB7CiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiAgcmV0dXJuIDo6YnN0eWxlOjpmaXRfaW5fbG9uZyh4KTsKfQoKaW50IHNlbGZfZGVjX3ByZShpbnQmIHgpIHsKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKICByZXR1cm4gOjpic3R5bGU6OmZpdF9pbl9pbnQoeCk7Cn0KCmJpZ3VpbnQgZXh0cmFjdChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcjsKICBsb2dpYyAiZXh0cmFjdCBiMnN0eWxlX19yIEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiByOwp9CgpiaWd1aW50IGV4dHJhY3RfcmVtYWluZGVyKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByOwogIGxvZ2ljICJleHRyYWN0IEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcjsKICBsb2dpYyAibGVmdF9zaGlmdCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiAgbG9naWMgInJpZ2h0X3NoaWZ0IGIyc3R5bGVfX3IgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcjsKfQoKYmlndWludCBsZWZ0X3NoaWZ0KGJpZ3VpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbGVmdF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBpbnQgaikgewogIHJldHVybiByaWdodF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiBsZWZ0X3NoaWZ0KGksIDo6YnN0eWxlOjp0b19iaWd1aW50KGopKTsKfQoKYmlndWludCByaWdodF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiByaWdodF9zaGlmdChpLCA6OmJzdHlsZTo6dG9fYmlndWludChqKSk7Cn0KCmludCBsZWZ0X3NoaWZ0KGludCBpLCBpbnQgaikgewogIHJldHVybiA6OmJzdHlsZTo6dG9faW50KAogICAgbGVmdF9zaGlmdCg6OmJzdHlsZTo6dG9fYmlndWludChpKSwKICAgICAgICAgICAgICAgOjpic3R5bGU6OnRvX2JpZ3VpbnQoaikpCiAgKTsKfQoKaW50IHJpZ2h0X3NoaWZ0KGludCBpLCBpbnQgaikgewogIHJldHVybiA6OmJzdHlsZTo6dG9faW50KAogICAgcmlnaHRfc2hpZnQoOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgpsb25nIGxlZnRfc2hpZnQobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gOjpic3R5bGU6OnRvX2xvbmcoCiAgICBsZWZ0X3NoaWZ0KDo6YnN0eWxlOjp0b19iaWd1aW50KGkpLAogICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgpsb25nIHJpZ2h0X3NoaWZ0KGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIDo6YnN0eWxlOjp0b19sb25nKAogICAgcmlnaHRfc2hpZnQoOjpic3R5bGU6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OmJzdHlsZTo6dG9fYmlndWludChqKSkKICApOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19IFgAAAGIyc3R5bGUvcmF3X2hlYXBfcHRyLmhlAwAA77u/DQovKiBUT0RPOiBJbXBsZW1lbnRhdGlvbg0KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1JBV19IRUFQX1BUUg0KI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1JBV19IRUFQX1BUUg0KDQojaW5jbHVkZSA8YjJzdHlsZS5oPg0KI2luY2x1ZGUgPGFzc2VydC5oPg0KDQpuYW1lc3BhY2UgYjJzdHlsZSB7DQoNCmNsYXNzIHJhd19oZWFwX3B0ciB7DQogIHR5cGVfcHRyIHA7DQoNCiAgYm9vbCBpc19udWxsKCkgew0KICAgIGJvb2wgcjsNCiAgICBsb2dpYyAiZW1wdHkgYjJzdHlsZV9fciB0aGlzLnAiOw0KICAgIHJldHVybiByOw0KICB9DQoNCiAgdGVtcGxhdGUgPFQ+DQogIFQgZ2V0KCkgew0KICAgIHR5cGVfcHRyIHYgPSB0aGlzLnA7DQogICAgc3RhdGljX2Nhc3QodiwgVCk7DQogICAgcmV0dXJuIHY7DQogIH0NCg0KICB2b2lkIHNldF9udWxsKCkgew0KICAgIHR5cGVfcHRyIHg7DQogICAgdGhpcy5wID0geDsNCiAgfQ0KDQogIC8vIFRPRE86IEZpbmQgYSBnb29kIHdheSB0byBhdXRvbWF0aWNhbGx5IGRlYWxsb2MgaGVhcCByZXNvdXJjZXMuDQogIHRlbXBsYXRlIDxUPg0KICB2b2lkIGRlc3RydWN0KCkgew0KICAgIDo6YXNzZXJ0KCF0aGlzLmlzX251bGwoKSk7DQogICAgVCB4ID0gdGhpcy5nZXQ8VD4oKTsNCiAgICBkZWFsbG9jKHgpOw0KICAgIHR5cGVfcHRyIHg7DQogICAgdGhpcy5wID0geDsNCiAgfQ0KDQogIHRlbXBsYXRlIDxUPg0KICB2b2lkIHNldChUIHQpIHsNCiAgICBzdGF0aWNfY2FzdCh0LCB0eXBlX3B0cik7DQogICAgdGhpcy5wID0gdDsNCiAgfQ0KfTsNCg0KfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUNCg0KI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1JBV19IRUFQX1BUUg0KKi8NAAAAYjJzdHlsZS9yZWYuaDcDAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1JFRl9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9SRUZfSAoKI2luY2x1ZGUgPGIyc3R5bGUuaD4KI2luY2x1ZGUgPGIyc3R5bGUvaGVhcF9wdHIuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdGVtcGxhdGUgPFQ+CmNsYXNzIHJlZiB7CiAgaGVhcF9wdHI8VD4gX2E7CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICB0aGlzLl9hLmRlc3RydWN0KCk7CiAgfQoKICBib29sIGVtcHR5KCkgewogICAgcmV0dXJuIHRoaXMuX2EuZW1wdHkoKTsKICB9CgogIHZvaWQgc2V0KFQgdikgewogICAgaWYgKHRoaXMuZW1wdHkoKSkgdGhpcy5fYS5hbGxvYygxKTsKICAgIHRoaXMuX2Euc2V0KDAsIHYpOwogIH0KCiAgdm9pZCBhbGxvYygpIHsKICAgIFQgdjsKICAgIHRoaXMuc2V0KHYpOwogIH0KCiAgVCBnZXQoKSB7CiAgICA6OmFzc2VydCghdGhpcy5lbXB0eSgpKTsKICAgIHJldHVybiB0aGlzLl9hLmdldCgwKTsKICB9CgogIFQgcmVsZWFzZSgpIHsKICAgIFQgciA9IHRoaXMuZ2V0KCk7Cgl0aGlzLmRlc3RydWN0KCk7CiAgICByZXR1cm4gcjsKICB9CgogIHZvaWQgY29uc3RydWN0KCkge30KCiAgdm9pZCBjb25zdHJ1Y3QoVCB2KSB7CiAgICB0aGlzLmNvbnN0cnVjdCgpOwogICAgdGhpcy5zZXQodik7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChyZWY8VD4mIG90aGVyKSB7CiAgICB0aGlzLmNvbnN0cnVjdChvdGhlci5yZWxlYXNlKCkpOwogIH0KfTsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfUkVGX0gKDwAAAGIyc3R5bGUvc3RkaW8uaEcDAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1NURElPX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1NURElPX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3RvX3N0ci5oPgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdm9pZCBzdGRfb3V0KHN0cmluZyBpKSB7CiAgbG9naWMgImludGVycnVwdCBzdGRvdXQgYjJzdHlsZV9faSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyI7Cn0KCnZvaWQgc3RkX2VycihzdHJpbmcgaSkgewogIGxvZ2ljICJpbnRlcnJ1cHQgc3RkZXJyIGIyc3R5bGVfX2kgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmciOwp9Cgp0ZW1wbGF0ZSA8VD4Kdm9pZCBzdGRfb3V0KFQgaSkgewogIHN0ZF9vdXQodG9fc3RyKGkpKTsKfQoKdGVtcGxhdGUgPFQ+CnZvaWQgc3RkX2VycihUIGkpIHsKICBzdGRfZXJyKHRvX3N0cihpKSk7Cn0KCi8vIFRPRE86IEltcGxlbWVudCB0ZW1wbGF0ZSBpbmZlcmVuY2UuCnZvaWQgc3RkX291dChib29sIGkpIHsKICBzdGRfb3V0PGJvb2w+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoYm9vbCBpKSB7CiAgc3RkX2Vycjxib29sPihpKTsKfQoKdm9pZCBzdGRfb3V0KGludCBpKSB7CiAgc3RkX291dDxpbnQ+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoaW50IGkpIHsKICBzdGRfZXJyPGludD4oaSk7Cn0KCnZvaWQgc3RkX291dChiaWd1aW50IGkpIHsKICBzdGRfb3V0PGJpZ3VpbnQ+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoYmlndWludCBpKSB7CiAgc3RkX2VycjxiaWd1aW50PihpKTsKfQoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9TVERJT19ICg0AAABiMnN0eWxlL3N0ci5oxQIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1NUUl9ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8YnN0eWxlL3N0ci5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7CgpzdHJpbmcgc3RyX21pZChzdHJpbmcgcywgaW50IGksIGludCBsKSB7CiAgOjphc3NlcnQoX19TVEFURU1FTlRfXyArICJAIiArIF9fRklMRV9fLCAoaSA+PSAwKSAmJiAobCA+PSAwKSk7CiAgc3RyaW5nIHI7CiAgbG9naWMgImN1dF9sZW4gYjJzdHlsZV9fciBiMnN0eWxlX19zIGIyc3R5bGVfX2kgYjJzdHlsZV9fbCI7CiAgcmV0dXJuIHI7Cn0KCmJvb2wgc3RyX2VuZHNfd2l0aChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICBpbnQgaWwgPSA6OmJzdHlsZTo6c3RyX2xlbihpKTsKICBpbnQgamwgPSA6OmJzdHlsZTo6c3RyX2xlbihqKTsKICBpZiAoaWwgPCBqbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBpZiAoaWwgPT0gamwpIHsKICAgIHJldHVybiA6OmJzdHlsZTo6c3RyX2VxdWFsKGksIGopOwogIH0KICBzdHJpbmcgc2kgPSBzdHJfbWlkKGksIGlsIC0gamwsIGpsKTsKICByZXR1cm4gOjpic3R5bGU6OnN0cl9lcXVhbChzaSwgaik7Cn0KCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gQAAAAYjJzdHlsZS90b19zdHIuaGMGAADvu78NCiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9UT19TVFJfSA0KI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1RPX1NUUl9IDQoNCiNpbmNsdWRlIDxiMnN0eWxlL2xvYWRlZF9tZXRob2QuaD4NCiNpbmNsdWRlIDxsaW1pdHMuaD4NCg0KbmFtZXNwYWNlIGIyc3R5bGUgew0KDQpzdHJpbmcgdG9fc3RyKHN0cmluZyBpKSB7DQogIHJldHVybiBpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGJ5dGUgaSkgew0KICByZXR1cm4gOjpic3R5bGU6OnRvX3N0cihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihib29sIGkpIHsNCiAgaWYgKGkpIHJldHVybiAiVHJ1ZSI7DQogIHJldHVybiAiRmFsc2UiOw0KfQ0KDQpzdHJpbmcgbGVnYWN5X2JpZ3VpbnRfdG9fc3RyKGJpZ3VpbnQgaSkgew0KICBpZiAoaSA9PSAwTCkgew0KICAgIHJldHVybiAiMCI7DQogIH0NCiAgc3RyaW5nIHM7DQogIHdoaWxlIChpID4gMEwpIHsNCiAgICBpbnQgYiA9IDo6YnN0eWxlOjp0b19pbnQobW9kKGksIDEwTCkpOw0KICAgIGkgLz0gMTBMOw0KICAgIGIgKz0gNDg7DQogICAgcyA9IDo6YnN0eWxlOjpzdHJfY29uY2F0KDo6YnN0eWxlOjp0b19zdHIoOjpic3R5bGU6OnRvX2J5dGUoYikpLCBzKTsNCiAgfQ0KICByZXR1cm4gczsNCn0NCg0Kc3RyaW5nIGJpZ3VpbnRfdG9fc3RyKGJpZ3VpbnQgaSkgew0KICBsb2FkX21ldGhvZCgiYmlnX3VpbnRfdG9fc3RyIik7DQogIHJldHVybiBleGVjdXRlX2xvYWRlZF9tZXRob2Q8YmlndWludCwgc3RyaW5nPihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihiaWd1aW50IGkpIHsNCiAgcmV0dXJuIGJpZ3VpbnRfdG9fc3RyKGkpOw0KfQ0KDQp0ZW1wbGF0ZSA8VD4NCnN0cmluZyBiaWd1aW50X3RvX3N0cl9mb3J3YXJkKFQgaSwgVCBNQVgpIHsNCiAgaWYgKGkgPD0gTUFYKSB7DQogICAgcmV0dXJuIGJpZ3VpbnRfdG9fc3RyKDo6YnN0eWxlOjp0b19iaWd1aW50KGkpKTsNCiAgfQ0KICBpIC09IE1BWDsNCiAgaSA9IE1BWCAtIGk7DQogIFQgXzIgPSAyOw0KICBpICs9IF8yOw0KICByZXR1cm4gOjpic3R5bGU6OnN0cl9jb25jYXQoIi0iLCBiaWd1aW50X3RvX3N0cig6OmJzdHlsZTo6dG9fYmlndWludChpKSkpOw0KfQ0KDQpzdHJpbmcgaW50X3RvX3N0cihpbnQgaSkgew0KICByZXR1cm4gYmlndWludF90b19zdHJfZm9yd2FyZDxpbnQ+KGksIDo6SU5UX01BWCk7DQp9DQoNCnN0cmluZyB0b19zdHIoaW50IGkpIHsNCiAgcmV0dXJuIGludF90b19zdHIoaSk7DQp9DQoNCnN0cmluZyB1ZmxvYXRfdG9fc3RyKHVmbG9hdCBpKSB7DQogIGxvYWRfbWV0aG9kKCJiaWdfdWRlY190b19zdHIiKTsNCiAgcmV0dXJuIGV4ZWN1dGVfbG9hZGVkX21ldGhvZDx1ZmxvYXQsIHN0cmluZz4oaSk7DQp9DQoNCnN0cmluZyB0b19zdHIodWZsb2F0IGkpIHsNCiAgcmV0dXJuIHVmbG9hdF90b19zdHIoaSk7DQp9DQoNCnN0cmluZyBsb25nX3RvX3N0cihsb25nIGkpIHsNCiAgcmV0dXJuIGJpZ3VpbnRfdG9fc3RyX2ZvcndhcmQ8bG9uZz4oaSwgOjpMT05HX01BWCk7DQp9DQoNCnN0cmluZyB0b19zdHIobG9uZyBpKSB7DQogIHJldHVybiBsb25nX3RvX3N0cihpKTsNCn0NCg0KfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUNCg0KI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1RPX1NUUl9IDQoPAAAAYjJzdHlsZS90eXBlcy5omgEAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfVFlQRVNfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfVFlQRVNfSAoKI2luY2x1ZGUgPGJzdHlsZS90eXBlcy5oPgoKLy8gVE9ETzogU2VhcmNoIHR5cGVzIGluIHBhcmVudCBzY29wZXMuCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnR5cGVkZWYgOjpzdHJpbmcgc3RyaW5nOwp0eXBlZGVmIDo6dm9pZCB2b2lkOwp0eXBlZGVmIDo6Ym9vbCBib29sOwp0eXBlZGVmIDo6YmlndWludCBiaWd1aW50Owp0eXBlZGVmIDo6bG9uZyBsb25nOwp0eXBlZGVmIDo6aW50IGludDsKdHlwZWRlZiA6OmJ5dGUgYnl0ZTsKdHlwZWRlZiA6OnVmbG9hdCB1ZmxvYXQ7Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1RZUEVTX0gKEAAAAGIyc3R5bGUvdWZsb2F0LmjzCwAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9VRkxPQVRfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfVUZMT0FUX0gKCiNpbmNsdWRlIDxiMnN0eWxlL2xvYWRlZF9tZXRob2QuaD4KI2luY2x1ZGUgPGIyc3R5bGUvc3RkaW8uaD4KI2luY2x1ZGUgPGIyc3R5bGUvc3RyLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7Cgpib29sIGVxdWFsKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIGJvb2wgcmVzdWx0OwogIGxvZ2ljICJmbG9hdF9lcXVhbCBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIG5vdF9lcXVhbCh1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAiZmxvYXRfZXF1YWwgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIG5vdChyZXN1bHQpOwp9Cgpib29sIGdyZWF0ZXJfdGhhbih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAiZmxvYXRfbW9yZSBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgcmV0dXJuIG9yKGdyZWF0ZXJfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGxlc3NfdGhhbih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKICBsb2dpYyAiZmxvYXRfbGVzcyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIGxlc3Nfb3JfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgcmV0dXJuIG9yKGxlc3NfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgp1ZmxvYXQgYWRkKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIGxvZ2ljICJmbG9hdF9hZGQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgp1ZmxvYXQgbWludXModWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgbG9naWMgImZsb2F0X3N1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKICByZXR1cm4gaTsKfQoKdWZsb2F0IG11bHRpcGx5KHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIGxvZ2ljICJmbG9hdF9tdWx0aXBseSBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiAgcmV0dXJuIGk7Cn0KCnVmbG9hdCBkaXZpZGUodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgdWZsb2F0IHJlc3VsdDsKICBsb2dpYyAiZmxvYXRfZGl2aWRlIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiByZXN1bHQ7Cn0KCnVmbG9hdCBwb3dlcih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBsb2dpYyAiZmxvYXRfcG93ZXIgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwogIHJldHVybiBpOwp9Cgp2b2lkIHN0ZF9vdXQodWZsb2F0IGkpIHsKICBzdGRfb3V0KHVmbG9hdF90b19zdHIoaSkpOwp9Cgp2b2lkIHN0ZF9lcnIodWZsb2F0IGkpIHsKICBzdGRfZXJyKHVmbG9hdF90b19zdHIoaSkpOwp9Cgp1ZmxvYXQgc2VsZl9pbmNfcG9zdCh1ZmxvYXQmIHgpIHsKICB1ZmxvYXQgciA9IHg7Cgl4ID0gYWRkKHgsIDEuMCk7CiAgcmV0dXJuIHI7Cn0KCnVmbG9hdCBzZWxmX2RlY19wb3N0KHVmbG9hdCYgeCkgewogIHVmbG9hdCByID0geDsKCXggPSBtaW51cyh4LCAxLjApOwogIHJldHVybiByOwp9Cgp1ZmxvYXQgc2VsZl9pbmNfcHJlKHVmbG9hdCYgeCkgewoJeCA9IGFkZCh4LCAxLjApOwogIHJldHVybiB4Owp9Cgp1ZmxvYXQgc2VsZl9kZWNfcHJlKHVmbG9hdCYgeCkgewoJeCA9IG1pbnVzKHgsIDEuMCk7CiAgcmV0dXJuIHg7Cn0KCnVmbG9hdCB1ZmxvYXRfX2Zyb20oYmlndWludCBpKSB7CiAgbG9hZF9tZXRob2QoImJpZ191aW50X3RvX2JpZ191ZGVjIik7CiAgcmV0dXJuIGV4ZWN1dGVfbG9hZGVkX21ldGhvZDxiaWd1aW50LCB1ZmxvYXQ+KGkpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcm9tKGludCBpKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJvbSg6OmJzdHlsZTo6dG9fYmlndWludChpKSk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2Zyb20obG9uZyBpKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJvbSg6OmJzdHlsZTo6dG9fYmlndWludChpKSk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2ZyYWN0aW9uKGJpZ3VpbnQgbiwgYmlndWludCBkKSB7CiAgdWZsb2F0IHJlc3VsdCA9IHVmbG9hdF9fZnJvbShuKTsKICB1ZmxvYXQgdWQgPSB1ZmxvYXRfX2Zyb20oZCk7CiAgcmV0dXJuIGRpdmlkZShyZXN1bHQsIHVkKTsKfQoKdWZsb2F0IHVmbG9hdF9fZnJhY3Rpb24oYmlndWludCBuLCBpbnQgZCkgewogIHJldHVybiB1ZmxvYXRfX2ZyYWN0aW9uKG4sIDo6YnN0eWxlOjp0b19iaWd1aW50KGQpKTsKfQoKdWZsb2F0IHVmbG9hdF9fZnJhY3Rpb24oYmlndWludCBuLCBsb25nIGQpIHsKICByZXR1cm4gdWZsb2F0X19mcmFjdGlvbihuLCA6OmJzdHlsZTo6dG9fYmlndWludChkKSk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2ZyYWN0aW9uKGludCBuLCBiaWd1aW50IGQpIHsKICByZXR1cm4gdWZsb2F0X19mcmFjdGlvbig6OmJzdHlsZTo6dG9fYmlndWludChuKSwgZCk7Cn0KCnVmbG9hdCB1ZmxvYXRfX2ZyYWN0aW9uKGxvbmcgbiwgYmlndWludCBkKSB7CiAgcmV0dXJuIHVmbG9hdF9fZnJhY3Rpb24oOjpic3R5bGU6OnRvX2JpZ3VpbnQobiksIGQpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcmFjdGlvbihpbnQgbiwgaW50IGQpIHsKICByZXR1cm4gdWZsb2F0X19mcmFjdGlvbig6OmJzdHlsZTo6dG9fYmlndWludChuKSwgOjpic3R5bGU6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp1ZmxvYXQgdWZsb2F0X19mcmFjdGlvbihsb25nIG4sIGxvbmcgZCkgewogIHJldHVybiB1ZmxvYXRfX2ZyYWN0aW9uKDo6YnN0eWxlOjp0b19iaWd1aW50KG4pLCA6OmJzdHlsZTo6dG9fYmlndWludChkKSk7Cn0KCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9VRkxPQVRfSAoLAAAAc3RkL3R5cGVzLmhdAQAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9TVERfVFlQRVNfSAoKI2luY2x1ZGUgPGJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIHN0ZCB7Cgp0eXBlZGVmIDo6c3RyaW5nIHN0cmluZzsKdHlwZWRlZiA6OnZvaWQgdm9pZDsKdHlwZWRlZiA6OmJvb2wgYm9vbDsKdHlwZWRlZiA6OmJpZ3VpbnQgYmlndWludDsKdHlwZWRlZiA6OmxvbmcgbG9uZzsKdHlwZWRlZiA6OmludCBpbnQ7CnR5cGVkZWYgOjpieXRlIGJ5dGU7CnR5cGVkZWYgOjp1ZmxvYXQgdWZsb2F0OwoKfSAgLy8gbmFtZXNwYWNlIHN0ZAoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9TVERfVFlQRVNfSAoAAABzdGQvdmVjdG9yGQUAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1NURF9WRUNUT1IKI2RlZmluZSBCMlNUWUxFX0xJQl9TVERfVkVDVE9SCgojaW5jbHVkZSA8YjJzdHlsZS5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDxiMnN0eWxlL2hlYXBfcHRyLmg+CiNpbmNsdWRlIDxzdGQvdHlwZXMuaD4KCm5hbWVzcGFjZSBzdGQgewoKdGVtcGxhdGUgPFQ+CmNsYXNzIHZlY3RvciB7CiAgOjpiMnN0eWxlOjpoZWFwX3B0cjxUPiBfYTsKICBpbnQgX3M7CgogIGludCBzaXplKCkgewogICAgcmV0dXJuIHRoaXMuX3M7CiAgfQoKICBpbnQgY2FwYWNpdHkoKSB7CiAgICByZXR1cm4gdGhpcy5fYS5zaXplKCk7CiAgfQoKICBUIGdldChpbnQgaW5kZXgpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDAsICJnZXQiKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCksICJnZXQiKTsKICAgIHJldHVybiB0aGlzLl9hLmdldChpbmRleCk7CiAgfQoKICB2b2lkIHNldChpbnQgaW5kZXgsIFQgdikgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCwgInNldCIpOwogICAgOjphc3NlcnQoaW5kZXggPCB0aGlzLnNpemUoKSwgInNldCIpOwogICAgdGhpcy5fYS5zZXQoaW5kZXgsIHYpOwogIH0KCiAgdm9pZCBkZXN0cnVjdCgpIHsKICAgIHRoaXMuX2EuZGVzdHJ1Y3QoKTsKICB9CgogIHZvaWQgcmVzZXJ2ZShpbnQgc2l6ZSkgewogICAgOjpiMnN0eWxlOjpoZWFwX3B0cjxUPiB4KHNpemUpOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0aGlzLnNpemUoKTsgaSsrKSB7CiAgICAgIHguc2V0KGksIHRoaXMuZ2V0KGkpKTsKICAgIH0KCXRoaXMuZGVzdHJ1Y3QoKTsKICAgIHRoaXMuX2EgPSB4OwoJeC5yZWxlYXNlKCk7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChpbnQgc2l6ZSkgewogICAgdGhpcy5yZXNlcnZlKHNpemUpOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoKSB7CiAgICB0aGlzLmNvbnN0cnVjdCg0KTsKICB9CgogIHZvaWQgcHVzaF9iYWNrKFQgdikgewogICAgaWYgKHRoaXMuc2l6ZSgpID09IHRoaXMuY2FwYWNpdHkoKSkgewogICAgICB0aGlzLnJlc2VydmUodGhpcy5jYXBhY2l0eSgpIDw8IDEpOwogICAgfQogICAgdGhpcy5fcysrOwogICAgdGhpcy5zZXQodGhpcy5zaXplKCkgLSAxLCB2KTsKICB9CgogIHZvaWQgcG9wX2JhY2soKSB7CiAgICA6OmFzc2VydCh0aGlzLnNpemUoKSA+IDAsICJwb3BfYmFjayIpOwogICAgdGhpcy5fcy0tOwogIH0KCiAgdm9pZCBjbGVhcigpIHsKICAgIHRoaXMuX3MgPSAwOwogIH0KfTsKCn0gIC8vIG5hbWVzcGFjZSBzdGQKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfU1REX1ZFQ1RPUhAAAAB0ZXN0aW5nL2Fzc2VydC5oKAUAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1RFU1RJTkdfQVNTRVJUX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9URVNUSU5HX0FTU0VSVF9ICgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8YjJzdHlsZS90b19zdHIuaD4KI2luY2x1ZGUgPGJzdHlsZS5oPgojaW5jbHVkZSA8YnN0eWxlL3N0ci5oPgojaW5jbHVkZSA8dGVzdGluZy90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewpuYW1lc3BhY2UgdGVzdGluZyB7CgppbnQgX2Fzc2VydGlvbl9jb3VudCA9IDA7CgovLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byB0ZXN0IHRoZSBfX0ZJTEVfXyBpbiBpbmNsdWRlZCBmaWxlcy4Kc3RyaW5nIGFzc2VydF9fRklMRV9fKCkgewogIHJldHVybiBfX0ZJTEVfXzsKfQoKdm9pZCBhc3NlcnRfdHJ1ZShib29sIHYsIHN0cmluZyBtc2cpIHsKICBfYXNzZXJ0aW9uX2NvdW50Kys7CiAgc3RyaW5nIHByZWZpeDsKICBpZiAodikgewogICAgcHJlZml4ID0gIlN1Y2Nlc3M6ICI7CiAgfSBlbHNlIHsKICAgIHByZWZpeCA9ICJGYWlsdXJlOiAiOwogIH0KICA6OmIyc3R5bGU6OnN0ZF9vdXQocHJlZml4KTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQobXNnKTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlxuIik7Cn0KCnZvaWQgYXNzZXJ0X3RydWUoYm9vbCB2KSB7CiAgYXNzZXJ0X3RydWUodiwgIm5vIGV4dHJhIGluZm9ybWF0aW9uLiIpOwp9Cgp2b2lkIGFzc2VydF9mYWxzZShib29sIHYsIHN0cmluZyBtc2cpIHsKICBhc3NlcnRfdHJ1ZSghdiwgbXNnKTsKfQoKdm9pZCBhc3NlcnRfZmFsc2UoYm9vbCB2KSB7CiAgYXNzZXJ0X3RydWUoIXYpOwp9CgovKgpUT0RPOiBNYWtlIHRoaXMgd29yay4gQ3VycmVudGx5IGFzc2VydF9lcXVhbF9fMiBjb25mbGljdHMgd2l0aCB0aGUgZm9sbG93aW5nIG9uZS4KdGVtcGxhdGUgPFQsIFQyPgp2b2lkIGFzc2VydF9lcXVhbChUIHQsIFQyIHQyLCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0X3RydWUodCA9PSB0MiwgbXNnKTsKfQoqLwoKdGVtcGxhdGUgPFQsIFQyPgp2b2lkIGFzc2VydF9lcXVhbChUIHQsIFQyIHQyKSB7CiAgYXNzZXJ0X3RydWUodCA9PSB0MiwgOjpic3R5bGU6OnN0cl9jb25jYXQoOjpiMnN0eWxlOjp0b19zdHIodCksICIgIT0gIiwgOjpiMnN0eWxlOjp0b19zdHIodDIpKSk7Cn0KCnRlbXBsYXRlIDxUPgp2b2lkIGFzc2VydF9lcXVhbChUIHQsIFQgdDIpIHsKICBhc3NlcnRfZXF1YWw8VCwgVD4odCwgdDIpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdGVzdGluZwp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9URVNUSU5HX0FTU0VSVF9ICg8AAAB0ZXN0aW5nL3R5cGVzLmiuAQAACiNpZm5kZWYgQjJTVFlMRV9MSUJfVEVTVElOR19UWVBFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfVEVTVElOR19UWVBFU19ICgojaW5jbHVkZSA8YnN0eWxlL3R5cGVzLmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7Cm5hbWVzcGFjZSB0ZXN0aW5nIHsKCnR5cGVkZWYgOjpzdHJpbmcgc3RyaW5nOwp0eXBlZGVmIDo6dm9pZCB2b2lkOwp0eXBlZGVmIDo6Ym9vbCBib29sOwp0eXBlZGVmIDo6aW50IGludDsKCi8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgd2F5IHRvIHRlc3QgdGhlIF9fRklMRV9fIGluIGluY2x1ZGVkIGZpbGVzLgpzdHJpbmcgdHlwZXNfX0ZJTEVfXygpIHsKICByZXR1cm4gX19GSUxFX187Cn0KCn0gIC8vIG5hbWVzcGFjZSB0ZXN0aW5nCn0gIC8vIG5hZW1zcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX1RFU1RJTkdfVFlQRVNfSA=="
        ))
End Class
