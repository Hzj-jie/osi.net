Option Explicit On
Option Infer Off
Option Strict On
Imports osi.root.connector
Public NotInheritable Class b2style_lib
    Private Sub New()
    End Sub
    Public Shared ReadOnly data() As Byte = 
        Convert.FromBase64String(strcat_hint(CUInt(31337), 
            "CAAAAGFzc2VydC5oOAIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQVNTRVJUX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3N0ZGlvLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvc3RyLmg+Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYsIHN0cmluZyBtc2cpIHsKICBpZiAodikgcmV0dXJuOwogIGlmIChzdHJfZW1wdHkoc3RhdGVtZW50KSkgewogICAgYjJzdHlsZTo6c3RkX291dChtc2cpOwogIH0gZWxzZSB7CiAgICBiMnN0eWxlOjpzdGRfb3V0KHN0YXRlbWVudCArICI6ICIgKyBtc2cpOwogIH0KICBsb2dpYyAic3RvcCI7Cn0KCnZvaWQgYXNzZXJ0KGJvb2wgdiwgc3RyaW5nIG1zZykgewogIGFzc2VydCgiIiwgdiwgbXNnKTsKfQoKdm9pZCBhc3NlcnQoc3RyaW5nIHN0YXRlbWVudCwgYm9vbCB2KSB7CiAgYXNzZXJ0KHN0YXRlbWVudCwgdiwgIkFzc2VydGlvbiBmYWlsdXJlIik7Cn0KCnZvaWQgYXNzZXJ0KGJvb2wgdikgewogIGFzc2VydCgiIiwgdik7Cn0KCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQVNTRVJUX0gJAAAAYjJzdHlsZS5ouwAAAO+7vw0KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX0gNCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9IDQoNCiNpbmNsdWRlIDxic3R5bGUuaD4NCiNpbmNsdWRlIDxiMnN0eWxlL29wZXJhdG9ycy5oPg0KI2luY2x1ZGUgPGIyc3R5bGUvdWZsb2F0Lmg+DQoNCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9IDQoHAAAAcnVuLmNtZGsAAAANCmRlbCAvcyAqLnVufg0KLi5cLi5cLi5ccmVzb3VyY2VcZ2VuXHRhcl9nZW5cb3NpLnJvb3QudXR0IHRhcl9nZW4gLS1vdXRwdXQ9YjJzdHlsZV9saWINCm1vdmUgL1kgKi52YiAuLlwNCgkAAAB0ZXN0aW5nLmiFAQAACiNpZm5kZWYgVEVTVElOR19URVNUSU5HX0gKI2RlZmluZSBURVNUSU5HX1RFU1RJTkdfSAoKI2luY2x1ZGUgPGIyc3R5bGUvc3RkaW8uaD4KI2luY2x1ZGUgPHRlc3RpbmcvdHlwZXMuaD4KI2luY2x1ZGUgPHRlc3RpbmcvYXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7Cm5hbWVzcGFjZSB0ZXN0aW5nIHsKCnZvaWQgZmluaXNoZWQoKSB7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJUb3RhbCBhc3NlcnRpb25zOiAiKTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoX2Fzc2VydGlvbl9jb3VudCk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJcbiIpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdGVzdGluZwp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBURVNUSU5HX1RFU1RJTkdfSAoTAAAAYjJzdHlsZS9kZWxlZ2F0ZXMuaJgHAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX0RFTEVHQVRFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9ERUxFR0FURVNfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnRlbXBsYXRlIDxSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oKTsKCnRlbXBsYXRlIDxULCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMik7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNyk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUsIFQxNiwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSwgVDE2KTsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfREVMRUdBVEVTX0gSAAAAYjJzdHlsZS9oZWFwX3B0ci5oIgQAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfSEVBUF9QVFJfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfSEVBUF9QVFJfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKLy8gVHlwZSBUIGlzIHJlcXVpcmVkIHRvIHVzZSB0aGUgZGVhbGxvYyBpbnN0cnVjdGlvbi4KdGVtcGxhdGUgPFQ+CmNsYXNzIGhlYXBfcHRyIHsKICBUIF9hOwogIGludCBfczsKCiAgaW50IHNpemUoKSB7CiAgICByZXR1cm4gdGhpcy5fczsKICB9CgogIGJvb2wgZW1wdHkoKSB7CiAgICByZXR1cm4gdGhpcy5zaXplKCkgPT0gMDsKICB9CgogIHZvaWQgY29uc3RydWN0KCkgewogICAgdGhpcy5fcyA9IDA7CiAgfQoKICB2b2lkIGRlc3RydWN0KCkgewogICAgaWYgKHRoaXMuZW1wdHkoKSkgcmV0dXJuOwogICAgZGVhbGxvYyh0aGlzLl9hKTsKICAgIHRoaXMuY29uc3RydWN0KCk7CiAgfQoKICB2b2lkIGFsbG9jKGludCBzaXplKSB7CiAgICB0aGlzLmRlc3RydWN0KCk7CiAgICA6OmFzc2VydChzaXplID4gMCk7CiAgICBUIHhbc2l6ZV07CiAgICB0aGlzLl9hID0geDsKICAgIHRoaXMuX3MgPSBzaXplOwogICAgdW5kZWZpbmUoeCk7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChpbnQgc2l6ZSkgewogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICAgIHRoaXMuYWxsb2Moc2l6ZSk7CiAgfQoKICBUIGdldChpbnQgaW5kZXgpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDApOwogICAgOjphc3NlcnQoaW5kZXggPCB0aGlzLnNpemUoKSk7CiAgICByZXR1cm4gdGhpcy5fYVtpbmRleF07CiAgfQoKICB2b2lkIHNldChpbnQgaW5kZXgsIFQgdikgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCk7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpKTsKICAgIHRoaXMuX2FbaW5kZXhdID0gdjsKICB9CgogIHZvaWQgcmVsZWFzZSgpIHsKICAgIHRoaXMuY29uc3RydWN0KCk7CiAgfQp9OwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9IFwAAAGIyc3R5bGUvbG9hZGVkX21ldGhvZC5ohwMAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfTE9BREVEX01FVEhPRF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvbG9hZF9tZXRob2QuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnZvaWQgbG9hZF9tZXRob2Qoc3RyaW5nIG0pIHsKICA6OmxvYWRfbWV0aG9kKG0pOwp9Cgp0ZW1wbGF0ZSA8VD4KVCBleGVjdXRlX2xvYWRlZF9tZXRob2QoKSB7CiAgVCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImludGVycnVwdCBleGVjdXRlX2xvYWRlZF9tZXRob2QgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgcmVzdWx0IjsKI2Vsc2UgI2lmZGVmIEIyU1RZTEUKICBsb2dpYyAiaW50ZXJydXB0IGV4ZWN1dGVfbG9hZGVkX21ldGhvZCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQiOwojZWxzZQogIC8vIFRPRE86IFRyaWdnZXIgYW4gI2Vycm9yCiNlbmRpZgojZW5kaWYKICByZXR1cm4gcmVzdWx0Owp9Cgp0ZW1wbGF0ZSA8VCwgUlQ+ClJUIGV4ZWN1dGVfbG9hZGVkX21ldGhvZChUIHApIHsKICBSVCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImludGVycnVwdCBleGVjdXRlX2xvYWRlZF9tZXRob2QgcCByZXN1bHQiOwojZWxzZSAjaWZkZWYgQjJTVFlMRQogIGxvZ2ljICJpbnRlcnJ1cHQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kIGIyc3R5bGVfX3AgYjJzdHlsZV9fcmVzdWx0IjsKI2Vsc2UKICAvLyBUT0RPOiBUcmlnZ2VyIGFuICNlcnJvcgojZW5kaWYKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoJCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfTE9BREVEX01FVEhPRF9IChMAAABiMnN0eWxlL29wZXJhdG9ycy5ouDIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfT1BFUkFUT1JTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8YnN0eWxlL2ludC5oPgojaW5jbHVkZSA8YnN0eWxlL3N0ci5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKYm9vbCBhbmQoYm9vbCBpLCBib29sIGopIHsKICBpZiAoaSkgcmV0dXJuIGo7CiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sIG9yKGJvb2wgaSwgYm9vbCBqKSB7CiAgaWYgKGkpIHJldHVybiB0cnVlOwogIGlmIChqKSByZXR1cm4gdHJ1ZTsKICByZXR1cm4gZmFsc2U7Cn0KCmJvb2wgbm90KGJvb2wgaSkgewogIGlmIChpKSByZXR1cm4gZmFsc2U7CiAgcmV0dXJuIHRydWU7Cn0KCi8vIFRPRE86IENvbnNpZGVyIHRvIGF2b2lkIGFkZGluZyAiX3ByZSIgZm9yIG9wZXJhdG9yICEuCmJvb2wgbm90X3ByZShib29sIGkpIHsKICByZXR1cm4gbm90KGkpOwp9Cgpib29sIGVxdWFsKHN0cmluZyBpLCBzdHJpbmcgaikgewogIHJldHVybiA6OnN0cl9lcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwoc3RyaW5nIGksIHN0cmluZyBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gOjplcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiA6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiBub3QoZXF1YWwoaSwgaikpOwp9Cgpib29sIGVxdWFsKGludCBpLCBpbnQgaikgewogIHJldHVybiA6OmVxdWFsKGksIGopOwp9Cgpib29sIG5vdF9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gajsKICByZXR1cm4gbm90KGopOwp9Cgpib29sIG5vdF9lcXVhbChib29sIGksIGJvb2wgaikgewogIHJldHVybiBub3QoZXF1YWwoaSwgaikpOwp9Cgpib29sIGdyZWF0ZXJfdGhhbihiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJvb2wgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJtb3JlIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJtb3JlIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcmVzdWx0Owp9Cgpib29sIGdyZWF0ZXJfdGhhbihsb25nIGksIGxvbmcgaikgewogIHJldHVybiBncmVhdGVyX3RoYW4oOjp0b19iaWd1aW50KGkpLCA6OnRvX2JpZ3VpbnQoaikpOwp9Cgpib29sIGdyZWF0ZXJfdGhhbihpbnQgaSwgaW50IGopIHsKICByZXR1cm4gZ3JlYXRlcl90aGFuKDo6dG9fYmlndWludChpKSwgOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oYmlndWludCBpLCBiaWd1aW50IGopIHsKICBib29sIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAibGVzcyByZXN1bHQgaSBqIjsKI2Vsc2UKICBsb2dpYyAibGVzcyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBsZXNzX3RoYW4obG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gbGVzc190aGFuKDo6dG9fYmlndWludChpKSwgOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBsZXNzX3RoYW4oaW50IGksIGludCBqKSB7CiAgcmV0dXJuIGxlc3NfdGhhbig6OnRvX2JpZ3VpbnQoaSksIDo6dG9fYmlndWludChqKSk7Cn0KCmJvb2wgbGVzc19vcl9lcXVhbChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIG9yKGxlc3NfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGxlc3Nfb3JfZXF1YWwoaW50IGksIGludCBqKSB7CiAgcmV0dXJuIG9yKGxlc3NfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl9vcl9lcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiBvcihncmVhdGVyX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKGludCBpLCBpbnQgaikgewogIHJldHVybiBvcihncmVhdGVyX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYmlndWludCBhZGQoYmlndWludCBpLCBiaWd1aW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmxvbmcgYWRkKGxvbmcgaSwgbG9uZyBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgYWRkKGludCBpLCBpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KGkpOwp9CgpieXRlIGFkZChieXRlIGksIGJ5dGUgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fYnl0ZShpKTsKfQoKc3RyaW5nIGFkZChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpzdHJfY29uY2F0KGksIGopOwp9CgpiaWd1aW50IG1pbnVzKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInN1YnRyYWN0IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKbG9uZyBtaW51cyhsb25nIGksIGxvbmcgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcoaSk7Cn0KCmludCBtaW51cyhpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgbXVsdGlwbHkoYmlndWludCBpLCBiaWd1aW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAibXVsdGlwbHkgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJtdWx0aXBseSBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9Cgpsb25nIG11bHRpcGx5KGxvbmcgaSwgbG9uZyBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgIm11bHRpcGx5IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAibXVsdGlwbHkgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IG11bHRpcGx5KGludCBpLCBpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJtdWx0aXBseSBpIGkgaiI7CiNlbHNlCiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChpKTsKfQoKYmlndWludCBkaXZpZGUoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZGl2aWRlIHJlc3VsdCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBpIGoiOwojZWxzZQogIGxvZ2ljICJkaXZpZGUgYjJzdHlsZV9fcmVzdWx0IEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCmxvbmcgZGl2aWRlKGxvbmcgaSwgbG9uZyBqKSB7CiAgbG9uZyByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImRpdmlkZSByZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZGl2aWRlIGIyc3R5bGVfX3Jlc3VsdCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyhyZXN1bHQpOwp9CgppbnQgZGl2aWRlKGludCBpLCBpbnQgaikgewogIGludCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImRpdmlkZSByZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZGl2aWRlIGIyc3R5bGVfX3Jlc3VsdCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KHJlc3VsdCk7Cn0KCmJpZ3VpbnQgbW9kKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyByZXN1bHQgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGIyc3R5bGVfX3Jlc3VsdCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcmVzdWx0Owp9Cgpsb25nIG1vZChsb25nIGksIGxvbmcgaikgewogIGxvbmcgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJkaXZpZGUgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcocmVzdWx0KTsKfQoKaW50IG1vZChpbnQgaSwgaW50IGopIHsKICBpbnQgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJkaXZpZGUgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChyZXN1bHQpOwp9CgpiaWd1aW50IHBvd2VyKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInBvd2VyIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAicG93ZXIgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKbG9uZyBwb3dlcihsb25nIGksIGxvbmcgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJwb3dlciBpIGkgaiI7CiNlbHNlCiAgbG9naWMgInBvd2VyIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcoaSk7Cn0KCmludCBwb3dlcihpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAicG93ZXIgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgYml0X2FuZChiaWd1aW50IGksIGJpZ3VpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhbmQgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJhbmQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKbG9uZyBiaXRfYW5kKGxvbmcgaSwgbG9uZyBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFuZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImFuZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9CgppbnQgYml0X2FuZChpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYW5kIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiYW5kIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmJpZ3VpbnQgYml0X29yKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgIm9yIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAib3IgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKbG9uZyBiaXRfb3IobG9uZyBpLCBsb25nIGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAib3IgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJvciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9CgppbnQgYml0X29yKGludCBpLCBpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJvciBpIGkgaiI7CiNlbHNlCiAgbG9naWMgIm9yIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmJpZ3VpbnQgc2VsZl9pbmNfcG9zdChiaWd1aW50JiB4KSB7CiAgYmlndWludCByID0geDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gcjsKfQoKbG9uZyBzZWxmX2luY19wb3N0KGxvbmcmIHgpIHsKICBsb25nIHIgPSB4OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKHIpOwp9CgppbnQgc2VsZl9pbmNfcG9zdChpbnQmIHgpIHsKICBpbnQgciA9IHg7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChyKTsKfQoKYmlndWludCBzZWxmX2RlY19wb3N0KGJpZ3VpbnQmIHgpIHsKICBiaWd1aW50IHIgPSB4OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gcjsKfQoKbG9uZyBzZWxmX2RlY19wb3N0KGxvbmcmIHgpIHsKICBsb25nIHIgPSB4OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyhyKTsKfQoKaW50IHNlbGZfZGVjX3Bvc3QoaW50JiB4KSB7CiAgaW50IHIgPSB4OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KHIpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3ByZShiaWd1aW50JiB4KSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIHg7Cn0KCmxvbmcgc2VsZl9pbmNfcHJlKGxvbmcmIHgpIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyh4KTsKfQoKaW50IHNlbGZfaW5jX3ByZShpbnQmIHgpIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KHgpOwp9CgpiaWd1aW50IHNlbGZfZGVjX3ByZShiaWd1aW50JiB4KSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInN1YnRyYWN0IHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbmRpZgogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfZGVjX3ByZShsb25nJiB4KSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInN1YnRyYWN0IHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKHgpOwp9CgppbnQgc2VsZl9kZWNfcHJlKGludCYgeCkgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KHgpOwp9CgpiaWd1aW50IGV4dHJhY3QoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImV4dHJhY3QgciBAQHByZWZpeGVzQHRlbXBzQGJpZ3VpbnQgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZXh0cmFjdCBiMnN0eWxlX19yIEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcjsKfQoKYmlndWludCBleHRyYWN0X3JlbWFpbmRlcihiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcjsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZXh0cmFjdCBAQHByZWZpeGVzQHRlbXBzQGJpZ3VpbnQgciBpIGoiOwojZWxzZQogIGxvZ2ljICJleHRyYWN0IEBAcHJlZml4ZXNAdGVtcHNAYmlndWludCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByOwp9CgpiaWd1aW50IGxlZnRfc2hpZnQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImxlZnRfc2hpZnQgciBpIGoiOwojZWxzZQogIGxvZ2ljICJsZWZ0X3NoaWZ0IGIyc3R5bGVfX3IgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInJpZ2h0X3NoaWZ0IHIgaSBqIjsKI2Vsc2UKICBsb2dpYyAicmlnaHRfc2hpZnQgYjJzdHlsZV9fciBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcjsKfQoKYmlndWludCBsZWZ0X3NoaWZ0KGJpZ3VpbnQgaSwgaW50IGopIHsKICByZXR1cm4gbGVmdF9zaGlmdChpLCA6OnRvX2JpZ3VpbnQoaikpOwp9CgpiaWd1aW50IHJpZ2h0X3NoaWZ0KGJpZ3VpbnQgaSwgaW50IGopIHsKICByZXR1cm4gcmlnaHRfc2hpZnQoaSwgOjp0b19iaWd1aW50KGopKTsKfQoKYmlndWludCBsZWZ0X3NoaWZ0KGJpZ3VpbnQgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIGxlZnRfc2hpZnQoaSwgOjp0b19iaWd1aW50KGopKTsKfQoKYmlndWludCByaWdodF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiByaWdodF9zaGlmdChpLCA6OnRvX2JpZ3VpbnQoaikpOwp9CgppbnQgbGVmdF9zaGlmdChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gOjp0b19pbnQoCiAgICBsZWZ0X3NoaWZ0KDo6dG9fYmlndWludChpKSwKICAgICAgICAgICAgICAgOjp0b19iaWd1aW50KGopKQogICk7Cn0KCmludCByaWdodF9zaGlmdChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gOjp0b19pbnQoCiAgICByaWdodF9zaGlmdCg6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OnRvX2JpZ3VpbnQoaikpCiAgKTsKfQoKbG9uZyBsZWZ0X3NoaWZ0KGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIDo6dG9fbG9uZygKICAgIGxlZnRfc2hpZnQoOjp0b19iaWd1aW50KGkpLAogICAgICAgICAgICAgICA6OnRvX2JpZ3VpbnQoaikpCiAgKTsKfQoKbG9uZyByaWdodF9zaGlmdChsb25nIGksIGxvbmcgaikgewogIHJldHVybiA6OnRvX2xvbmcoCiAgICByaWdodF9zaGlmdCg6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgICA6OnRvX2JpZ3VpbnQoaikpCiAgKTsKfQoKdm9pZCBzZWxmX2FuZChib29sJiBpLCBib29sIGopIHsKICBpID0gYW5kKGksIGopOwp9Cgp2b2lkIHNlbGZfb3IoYm9vbCYgaSwgYm9vbCBqKSB7CiAgaSA9IG9yKGksIGopOwp9Cgp2b2lkIHNlbGZfYWRkKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBhZGQoaSwgaik7Cn0KCnZvaWQgc2VsZl9hZGQobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IGFkZChpLCBqKTsKfQoKdm9pZCBzZWxmX2FkZChpbnQmIGksIGludCBqKSB7CiAgaSA9IGFkZChpLCBqKTsKfQoKdm9pZCBzZWxmX2FkZChieXRlJiBpLCBieXRlIGopIHsKICBpID0gYWRkKGksIGopOwp9Cgp2b2lkIHNlbGZfbWludXMoYmlndWludCYgaSwgYmlndWludCBqKSB7CiAgaSA9IG1pbnVzKGksIGopOwp9Cgp2b2lkIHNlbGZfbWludXMobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IG1pbnVzKGksIGopOwp9Cgp2b2lkIHNlbGZfbWludXMoaW50JiBpLCBpbnQgaikgewogIGkgPSBtaW51cyhpLCBqKTsKfQoKdm9pZCBzZWxmX211bHRpcGx5KGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBtdWx0aXBseShpLCBqKTsKfQoKdm9pZCBzZWxmX211bHRpcGx5KGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBtdWx0aXBseShpLCBqKTsKfQoKdm9pZCBzZWxmX211bHRpcGx5KGludCYgaSwgaW50IGopIHsKICBpID0gbXVsdGlwbHkoaSwgaik7Cn0KCnZvaWQgc2VsZl9kaXZpZGUoYmlndWludCYgaSwgYmlndWludCBqKSB7CiAgaSA9IGRpdmlkZShpLCBqKTsKfQoKdm9pZCBzZWxmX2RpdmlkZShsb25nJiBpLCBsb25nIGopIHsKICBpID0gZGl2aWRlKGksIGopOwp9Cgp2b2lkIHNlbGZfZGl2aWRlKGludCYgaSwgaW50IGopIHsKICBpID0gZGl2aWRlKGksIGopOwp9Cgp2b2lkIHNlbGZfbW9kKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBtb2QoaSwgaik7Cn0KCnZvaWQgc2VsZl9tb2QobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IG1vZChpLCBqKTsKfQoKdm9pZCBzZWxmX21vZChpbnQmIGksIGludCBqKSB7CiAgaSA9IG1vZChpLCBqKTsKfQoKdm9pZCBzZWxmX3Bvd2VyKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBwb3dlcihpLCBqKTsKfQoKdm9pZCBzZWxmX3Bvd2VyKGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBwb3dlcihpLCBqKTsKfQoKdm9pZCBzZWxmX3Bvd2VyKGludCYgaSwgaW50IGopIHsKICBpID0gcG93ZXIoaSwgaik7Cn0KCnZvaWQgc2VsZl9iaXRfYW5kKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBiaXRfYW5kKGksIGopOwp9Cgp2b2lkIHNlbGZfYml0X2FuZChsb25nJiBpLCBsb25nIGopIHsKICBpID0gYml0X2FuZChpLCBqKTsKfQoKdm9pZCBzZWxmX2JpdF9hbmQoaW50JiBpLCBpbnQgaikgewogIGkgPSBiaXRfYW5kKGksIGopOwp9Cgp2b2lkIHNlbGZfYml0X29yKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBiaXRfb3IoaSwgaik7Cn0KCnZvaWQgc2VsZl9iaXRfb3IobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IGJpdF9vcihpLCBqKTsKfQoKdm9pZCBzZWxmX2JpdF9vcihpbnQmIGksIGludCBqKSB7CiAgaSA9IGJpdF9vcihpLCBqKTsKfQoKdm9pZCBzZWxmX2xlZnRfc2hpZnQoYmlndWludCYgaSwgYmlndWludCBqKSB7CiAgaSA9IGxlZnRfc2hpZnQoaSwgaik7Cn0KCnZvaWQgc2VsZl9yaWdodF9zaGlmdChiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gcmlnaHRfc2hpZnQoaSwgaik7Cn0KCnZvaWQgc2VsZl9sZWZ0X3NoaWZ0KGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBsZWZ0X3NoaWZ0KGksIGopOwp9Cgp2b2lkIHNlbGZfcmlnaHRfc2hpZnQobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IHJpZ2h0X3NoaWZ0KGksIGopOwp9Cgp2b2lkIHNlbGZfbGVmdF9zaGlmdChpbnQmIGksIGludCBqKSB7CiAgaSA9IGxlZnRfc2hpZnQoaSwgaik7Cn0KCnZvaWQgc2VsZl9yaWdodF9zaGlmdChpbnQmIGksIGludCBqKSB7CiAgaSA9IHJpZ2h0X3NoaWZ0KGksIGopOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19IChYAAABiMnN0eWxlL3Jhd19oZWFwX3B0ci5o2AMAAO+7vw0KLyogVE9ETzogSW1wbGVtZW50YXRpb24NCiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9SQVdfSEVBUF9QVFINCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9SQVdfSEVBUF9QVFINCg0KI2luY2x1ZGUgPGIyc3R5bGUuaD4NCiNpbmNsdWRlIDxhc3NlcnQuaD4NCg0KbmFtZXNwYWNlIGIyc3R5bGUgew0KDQpjbGFzcyByYXdfaGVhcF9wdHIgew0KICB0eXBlX3B0ciBwOw0KDQojaWZkZWYgQjNTVFlMRQ0KICBib29sIGlzX251bGwoKSB7DQogICAgYm9vbCByOw0KICAgIGxvZ2ljICJlbXB0eSByIHRoaXMucCI7DQogICAgcmV0dXJuIHI7DQogIH0NCiNlbHNlDQogIGJvb2wgaXNfbnVsbCgpIHsNCiAgICBib29sIHI7DQogICAgbG9naWMgImVtcHR5IGIyc3R5bGVfX3IgdGhpcy5wIjsNCiAgICByZXR1cm4gcjsNCiAgfQ0KI2VuZGlmDQoNCiAgdGVtcGxhdGUgPFQ+DQogIFQgZ2V0KCkgew0KICAgIHR5cGVfcHRyIHYgPSB0aGlzLnA7DQogICAgc3RhdGljX2Nhc3QodiwgVCk7DQogICAgcmV0dXJuIHY7DQogIH0NCg0KICB2b2lkIHNldF9udWxsKCkgew0KICAgIHR5cGVfcHRyIHg7DQogICAgdGhpcy5wID0geDsNCiAgfQ0KDQogIC8vIFRPRE86IEZpbmQgYSBnb29kIHdheSB0byBhdXRvbWF0aWNhbGx5IGRlYWxsb2MgaGVhcCByZXNvdXJjZXMuDQogIHRlbXBsYXRlIDxUPg0KICB2b2lkIGRlc3RydWN0KCkgew0KICAgIDo6YXNzZXJ0KCF0aGlzLmlzX251bGwoKSk7DQogICAgVCB4ID0gdGhpcy5nZXQ8VD4oKTsNCiAgICBkZWFsbG9jKHgpOw0KICAgIHR5cGVfcHRyIHg7DQogICAgdGhpcy5wID0geDsNCiAgfQ0KDQogIHRlbXBsYXRlIDxUPg0KICB2b2lkIHNldChUIHQpIHsNCiAgICBzdGF0aWNfY2FzdCh0LCB0eXBlX3B0cik7DQogICAgdGhpcy5wID0gdDsNCiAgfQ0KfTsNCg0KfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUNCg0KI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1JBV19IRUFQX1BUUg0KKi8NCg0AAABiMnN0eWxlL3JlZi5oNwMAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfUkVGX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1JFRl9ICgojaW5jbHVkZSA8YjJzdHlsZS5oPgojaW5jbHVkZSA8YjJzdHlsZS9oZWFwX3B0ci5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7Cgp0ZW1wbGF0ZSA8VD4KY2xhc3MgcmVmIHsKICBoZWFwX3B0cjxUPiBfYTsKCiAgdm9pZCBkZXN0cnVjdCgpIHsKICAgIHRoaXMuX2EuZGVzdHJ1Y3QoKTsKICB9CgogIGJvb2wgZW1wdHkoKSB7CiAgICByZXR1cm4gdGhpcy5fYS5lbXB0eSgpOwogIH0KCiAgdm9pZCBzZXQoVCB2KSB7CiAgICBpZiAodGhpcy5lbXB0eSgpKSB0aGlzLl9hLmFsbG9jKDEpOwogICAgdGhpcy5fYS5zZXQoMCwgdik7CiAgfQoKICB2b2lkIGFsbG9jKCkgewogICAgVCB2OwogICAgdGhpcy5zZXQodik7CiAgfQoKICBUIGdldCgpIHsKICAgIDo6YXNzZXJ0KCF0aGlzLmVtcHR5KCkpOwogICAgcmV0dXJuIHRoaXMuX2EuZ2V0KDApOwogIH0KCiAgVCByZWxlYXNlKCkgewogICAgVCByID0gdGhpcy5nZXQoKTsKCXRoaXMuZGVzdHJ1Y3QoKTsKICAgIHJldHVybiByOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoKSB7fQoKICB2b2lkIGNvbnN0cnVjdChUIHYpIHsKICAgIHRoaXMuY29uc3RydWN0KCk7CiAgICB0aGlzLnNldCh2KTsKICB9CgogIHZvaWQgY29uc3RydWN0KHJlZjxUPiYgb3RoZXIpIHsKICAgIHRoaXMuY29uc3RydWN0KG90aGVyLnJlbGVhc2UoKSk7CiAgfQp9OwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9SRUZfSAoPAAAAYjJzdHlsZS9zdGRpby5o/AIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RESU9fSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RESU9fSAoKI2luY2x1ZGUgPGIyc3R5bGUvdG9fc3RyLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxzdGRpby5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdm9pZCBzdGRfb3V0KHN0cmluZyBpKSB7CiAgOjpzdGRfb3V0KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoc3RyaW5nIGkpIHsKICA6OnN0ZF9lcnIoaSk7Cn0KCnRlbXBsYXRlIDxUPgp2b2lkIHN0ZF9vdXQoVCBpKSB7CiAgc3RkX291dCh0b19zdHIoaSkpOwp9Cgp0ZW1wbGF0ZSA8VD4Kdm9pZCBzdGRfZXJyKFQgaSkgewogIHN0ZF9lcnIodG9fc3RyKGkpKTsKfQoKLy8gVE9ETzogSW1wbGVtZW50IHRlbXBsYXRlIGluZmVyZW5jZS4Kdm9pZCBzdGRfb3V0KGJvb2wgaSkgewogIHN0ZF9vdXQ8Ym9vbD4oaSk7Cn0KCnZvaWQgc3RkX2Vycihib29sIGkpIHsKICBzdGRfZXJyPGJvb2w+KGkpOwp9Cgp2b2lkIHN0ZF9vdXQoaW50IGkpIHsKICBzdGRfb3V0PGludD4oaSk7Cn0KCnZvaWQgc3RkX2VycihpbnQgaSkgewogIHN0ZF9lcnI8aW50PihpKTsKfQoKdm9pZCBzdGRfb3V0KGJpZ3VpbnQgaSkgewogIHN0ZF9vdXQ8YmlndWludD4oaSk7Cn0KCnZvaWQgc3RkX2VycihiaWd1aW50IGkpIHsKICBzdGRfZXJyPGJpZ3VpbnQ+KGkpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX1NURElPX0gKDQAAAGIyc3R5bGUvc3RyLmhgAwAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9TVFJfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvc3RyLmg+CiNpbmNsdWRlIDxhc3NlcnQuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnN0cmluZyBfc3RyX21pZChzdHJpbmcgcywgaW50IGksIGludCBsKSB7CiAgc3RyaW5nIHI7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImN1dF9sZW4gciBzIGkgbCI7CiNlbHNlICNpZmRlZiBCMlNUWUxFCiAgbG9naWMgImN1dF9sZW4gYjJzdHlsZV9fciBiMnN0eWxlX19zIGIyc3R5bGVfX2kgYjJzdHlsZV9fbCI7CiNlbHNlCiAgLy8gVE9ETzogVHJpZ2dlciBhbiAjZXJyb3IuCiNlbmRpZgojZW5kaWYKICByZXR1cm4gcjsKfQoKc3RyaW5nIHN0cl9taWQoc3RyaW5nIHMsIGludCBpLCBpbnQgbCkgewogIDo6YXNzZXJ0KF9fU1RBVEVNRU5UX18gKyAiQCIgKyBfX0ZJTEVfXywgKGkgPj0gMCkgJiYgKGwgPj0gMCkpOwogIHJldHVybiBfc3RyX21pZChzLCBpLCBsKTsKfQoKYm9vbCBzdHJfZW5kc193aXRoKHN0cmluZyBpLCBzdHJpbmcgaikgewogIGludCBpbCA9IDo6c3RyX2xlbihpKTsKICBpbnQgamwgPSA6OnN0cl9sZW4oaik7CiAgaWYgKGlsIDwgamwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGlsID09IGpsKSB7CiAgICByZXR1cm4gOjpzdHJfZXF1YWwoaSwgaik7CiAgfQogIHN0cmluZyBzaSA9IHN0cl9taWQoaSwgaWwgLSBqbCwgamwpOwogIHJldHVybiA6OnN0cl9lcXVhbChzaSwgaik7Cn0KCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gKEAAAAGIyc3R5bGUvdG9fc3RyLmhDBgAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfVE9fU1RSX0gNCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9UT19TVFJfSA0KDQojaW5jbHVkZSA8YjJzdHlsZS9sb2FkZWRfbWV0aG9kLmg+DQojaW5jbHVkZSA8YjJzdHlsZS9vcGVyYXRvcnMuaD4NCiNpbmNsdWRlIDxsaW1pdHMuaD4NCg0KbmFtZXNwYWNlIGIyc3R5bGUgew0KDQpzdHJpbmcgdG9fc3RyKHN0cmluZyBpKSB7DQogIHJldHVybiBpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGJ5dGUgaSkgew0KICByZXR1cm4gOjp0b19zdHIoaSk7DQp9DQoNCnN0cmluZyB0b19zdHIoYm9vbCBpKSB7DQogIGlmIChpKSByZXR1cm4gIlRydWUiOw0KICByZXR1cm4gIkZhbHNlIjsNCn0NCg0Kc3RyaW5nIGxlZ2FjeV9iaWd1aW50X3RvX3N0cihiaWd1aW50IGkpIHsNCiAgaWYgKGkgPT0gMEwpIHsNCiAgICByZXR1cm4gIjAiOw0KICB9DQogIHN0cmluZyBzOw0KICB3aGlsZSAoaSA+IDBMKSB7DQogICAgaW50IGIgPSA6OnRvX2ludChtb2QoaSwgMTBMKSk7DQogICAgaSAvPSAxMEw7DQogICAgYiArPSA0ODsNCiAgICBzID0gOjpzdHJfY29uY2F0KDo6dG9fc3RyKDo6dG9fYnl0ZShiKSksIHMpOw0KICB9DQogIHJldHVybiBzOw0KfQ0KDQpzdHJpbmcgYmlndWludF90b19zdHIoYmlndWludCBpKSB7DQogIGxvYWRfbWV0aG9kKCJiaWdfdWludF90b19zdHIiKTsNCiAgcmV0dXJuIGV4ZWN1dGVfbG9hZGVkX21ldGhvZDxiaWd1aW50LCBzdHJpbmc+KGkpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGJpZ3VpbnQgaSkgew0KICByZXR1cm4gYmlndWludF90b19zdHIoaSk7DQp9DQoNCnRlbXBsYXRlIDxUPg0Kc3RyaW5nIGJpZ3VpbnRfdG9fc3RyX2ZvcndhcmQoVCBpLCBUIE1BWCkgew0KICBpZiAoaSA8PSBNQVgpIHsNCiAgICByZXR1cm4gYmlndWludF90b19zdHIoOjp0b19iaWd1aW50KGkpKTsNCiAgfQ0KICBpIC09IE1BWDsNCiAgaSA9IE1BWCAtIGk7DQogIFQgXzIgPSAyOw0KICBpICs9IF8yOw0KICByZXR1cm4gOjpzdHJfY29uY2F0KCItIiwgYmlndWludF90b19zdHIoOjp0b19iaWd1aW50KGkpKSk7DQp9DQoNCnN0cmluZyBpbnRfdG9fc3RyKGludCBpKSB7DQogIHJldHVybiBiaWd1aW50X3RvX3N0cl9mb3J3YXJkPGludD4oaSwgOjpJTlRfTUFYKTsNCn0NCg0Kc3RyaW5nIHVmbG9hdF90b19zdHIodWZsb2F0IGkpIHsNCiAgbG9hZF9tZXRob2QoImJpZ191ZGVjX3RvX3N0ciIpOw0KICByZXR1cm4gZXhlY3V0ZV9sb2FkZWRfbWV0aG9kPHVmbG9hdCwgc3RyaW5nPihpKTsNCn0NCg0Kc3RyaW5nIGxvbmdfdG9fc3RyKGxvbmcgaSkgew0KICByZXR1cm4gYmlndWludF90b19zdHJfZm9yd2FyZDxsb25nPihpLCA6OkxPTkdfTUFYKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihpbnQgaSkgew0KICByZXR1cm4gaW50X3RvX3N0cihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cih1ZmxvYXQgaSkgew0KICByZXR1cm4gdWZsb2F0X3RvX3N0cihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihsb25nIGkpIHsNCiAgcmV0dXJuIGxvbmdfdG9fc3RyKGkpOw0KfQ0KDQp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQ0KDQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVE9fU1RSX0gNCg8AAABiMnN0eWxlL3R5cGVzLmiaAQAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9UWVBFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9UWVBFU19ICgojaW5jbHVkZSA8YnN0eWxlL3R5cGVzLmg+CgovLyBUT0RPOiBTZWFyY2ggdHlwZXMgaW4gcGFyZW50IHNjb3Blcy4KbmFtZXNwYWNlIGIyc3R5bGUgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjpiaWd1aW50IGJpZ3VpbnQ7CnR5cGVkZWYgOjpsb25nIGxvbmc7CnR5cGVkZWYgOjppbnQgaW50Owp0eXBlZGVmIDo6Ynl0ZSBieXRlOwp0eXBlZGVmIDo6dWZsb2F0IHVmbG9hdDsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVFlQRVNfSAoQAAAAYjJzdHlsZS91ZmxvYXQuaFcPAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1VGTE9BVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9VRkxPQVRfSAoKI2luY2x1ZGUgPGIyc3R5bGUvbG9hZGVkX21ldGhvZC5oPgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8YjJzdHlsZS9zdHIuaD4KI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCmJvb2wgZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2VxdWFsIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9lcXVhbCBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBub3RfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2VxdWFsIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9lcXVhbCBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIG5vdChyZXN1bHQpOwp9Cgpib29sIGdyZWF0ZXJfdGhhbih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZmxvYXRfbW9yZSByZXN1bHQgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZmxvYXRfbW9yZSBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBsZXNzX3RoYW4odWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2xlc3MgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X2xlc3MgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCnVmbG9hdCBhZGQodWZsb2F0IGksIHVmbG9hdCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2FkZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X2FkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9Cgp1ZmxvYXQgbWludXModWZsb2F0IGksIHVmbG9hdCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X3N1YnRyYWN0IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZmxvYXRfc3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKdWZsb2F0IG11bHRpcGx5KHVmbG9hdCBpLCB1ZmxvYXQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJmbG9hdF9tdWx0aXBseSBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X211bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCnVmbG9hdCBkaXZpZGUodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgdWZsb2F0IHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZmxvYXRfZGl2aWRlIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9kaXZpZGUgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCnVmbG9hdCBwb3dlcih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZmxvYXRfcG93ZXIgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9wb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgcmV0dXJuIG9yKGdyZWF0ZXJfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGxlc3Nfb3JfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgcmV0dXJuIG9yKGxlc3NfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgp2b2lkIHN0ZF9vdXQodWZsb2F0IGkpIHsKICBzdGRfb3V0KHVmbG9hdF90b19zdHIoaSkpOwp9Cgp2b2lkIHN0ZF9lcnIodWZsb2F0IGkpIHsKICBzdGRfZXJyKHVmbG9hdF90b19zdHIoaSkpOwp9Cgp1ZmxvYXQgc2VsZl9pbmNfcG9zdCh1ZmxvYXQmIHgpIHsKICB1ZmxvYXQgciA9IHg7Cgl4ID0gYWRkKHgsIDEuMCk7CiAgcmV0dXJuIHI7Cn0KCnVmbG9hdCBzZWxmX2RlY19wb3N0KHVmbG9hdCYgeCkgewogIHVmbG9hdCByID0geDsKCXggPSBtaW51cyh4LCAxLjApOwogIHJldHVybiByOwp9Cgp1ZmxvYXQgc2VsZl9pbmNfcHJlKHVmbG9hdCYgeCkgewoJeCA9IGFkZCh4LCAxLjApOwogIHJldHVybiB4Owp9Cgp1ZmxvYXQgc2VsZl9kZWNfcHJlKHVmbG9hdCYgeCkgewoJeCA9IG1pbnVzKHgsIDEuMCk7CiAgcmV0dXJuIHg7Cn0KCnZvaWQgc2VsZl9hZGQodWZsb2F0JiBpLCB1ZmxvYXQgaikgewogIGkgPSBhZGQoaSwgaik7Cn0KCnZvaWQgc2VsZl9taW51cyh1ZmxvYXQmIGksIHVmbG9hdCBqKSB7CiAgaSA9IG1pbnVzKGksIGopOwp9Cgp2b2lkIHNlbGZfbXVsdGlwbHkodWZsb2F0JiBpLCB1ZmxvYXQgaikgewogIGkgPSBtdWx0aXBseShpLCBqKTsKfQoKdm9pZCBzZWxmX2RpdmlkZSh1ZmxvYXQmIGksIHVmbG9hdCBqKSB7CiAgaSA9IGRpdmlkZShpLCBqKTsKfQoKdm9pZCBzZWxmX3Bvd2VyKHVmbG9hdCYgaSwgdWZsb2F0IGopIHsKICBpID0gcG93ZXIoaSwgaik7Cn0KCm5hbWVzcGFjZSB1ZmxvYXQgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjpiaWd1aW50IGJpZ3VpbnQ7CnR5cGVkZWYgOjpsb25nIGxvbmc7CnR5cGVkZWYgOjppbnQgaW50Owp0eXBlZGVmIDo6Ynl0ZSBieXRlOwp0eXBlZGVmIDo6dWZsb2F0IHVmbG9hdDsKCnVmbG9hdCBmcm9tKGJpZ3VpbnQgaSkgewogIDo6YjJzdHlsZTo6bG9hZF9tZXRob2QoImJpZ191aW50X3RvX2JpZ191ZGVjIik7CiAgcmV0dXJuIDo6YjJzdHlsZTo6ZXhlY3V0ZV9sb2FkZWRfbWV0aG9kPGJpZ3VpbnQsIHVmbG9hdD4oaSk7Cn0KCnVmbG9hdCBmcm9tKGludCBpKSB7CiAgcmV0dXJuIGZyb20oOjp0b19iaWd1aW50KGkpKTsKfQoKdWZsb2F0IGZyb20obG9uZyBpKSB7CiAgcmV0dXJuIGZyb20oOjp0b19iaWd1aW50KGkpKTsKfQoKdWZsb2F0IGZyYWN0aW9uKGJpZ3VpbnQgbiwgYmlndWludCBkKSB7CiAgdWZsb2F0IHJlc3VsdCA9IGZyb20obik7CiAgdWZsb2F0IHVkID0gZnJvbShkKTsKICByZXR1cm4gOjpiMnN0eWxlOjpkaXZpZGUocmVzdWx0LCB1ZCk7Cn0KCnVmbG9hdCBmcmFjdGlvbihiaWd1aW50IG4sIGludCBkKSB7CiAgcmV0dXJuIGZyYWN0aW9uKG4sIDo6dG9fYmlndWludChkKSk7Cn0KCnVmbG9hdCBmcmFjdGlvbihiaWd1aW50IG4sIGxvbmcgZCkgewogIHJldHVybiBmcmFjdGlvbihuLCA6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp1ZmxvYXQgZnJhY3Rpb24oaW50IG4sIGJpZ3VpbnQgZCkgewogIHJldHVybiBmcmFjdGlvbig6OnRvX2JpZ3VpbnQobiksIGQpOwp9Cgp1ZmxvYXQgZnJhY3Rpb24obG9uZyBuLCBiaWd1aW50IGQpIHsKICByZXR1cm4gZnJhY3Rpb24oOjp0b19iaWd1aW50KG4pLCBkKTsKfQoKdWZsb2F0IGZyYWN0aW9uKGludCBuLCBpbnQgZCkgewogIHJldHVybiBmcmFjdGlvbig6OnRvX2JpZ3VpbnQobiksIDo6dG9fYmlndWludChkKSk7Cn0KCnVmbG9hdCBmcmFjdGlvbihsb25nIG4sIGxvbmcgZCkgewogIHJldHVybiBmcmFjdGlvbig6OnRvX2JpZ3VpbnQobiksIDo6dG9fYmlndWludChkKSk7Cn0KCn0gIC8vIG5hbWVzcGFjZSB1ZmxvYXQKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9VRkxPQVRfSAoLAAAAc3RkL3R5cGVzLmhdAQAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9TVERfVFlQRVNfSAoKI2luY2x1ZGUgPGJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIHN0ZCB7Cgp0eXBlZGVmIDo6c3RyaW5nIHN0cmluZzsKdHlwZWRlZiA6OnZvaWQgdm9pZDsKdHlwZWRlZiA6OmJvb2wgYm9vbDsKdHlwZWRlZiA6OmJpZ3VpbnQgYmlndWludDsKdHlwZWRlZiA6OmxvbmcgbG9uZzsKdHlwZWRlZiA6OmludCBpbnQ7CnR5cGVkZWYgOjpieXRlIGJ5dGU7CnR5cGVkZWYgOjp1ZmxvYXQgdWZsb2F0OwoKfSAgLy8gbmFtZXNwYWNlIHN0ZAoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9TVERfVFlQRVNfSAoAAABzdGQvdmVjdG9yGQUAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1NURF9WRUNUT1IKI2RlZmluZSBCMlNUWUxFX0xJQl9TVERfVkVDVE9SCgojaW5jbHVkZSA8YjJzdHlsZS5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CiNpbmNsdWRlIDxiMnN0eWxlL2hlYXBfcHRyLmg+CiNpbmNsdWRlIDxzdGQvdHlwZXMuaD4KCm5hbWVzcGFjZSBzdGQgewoKdGVtcGxhdGUgPFQ+CmNsYXNzIHZlY3RvciB7CiAgOjpiMnN0eWxlOjpoZWFwX3B0cjxUPiBfYTsKICBpbnQgX3M7CgogIGludCBzaXplKCkgewogICAgcmV0dXJuIHRoaXMuX3M7CiAgfQoKICBpbnQgY2FwYWNpdHkoKSB7CiAgICByZXR1cm4gdGhpcy5fYS5zaXplKCk7CiAgfQoKICBUIGdldChpbnQgaW5kZXgpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDAsICJnZXQiKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCksICJnZXQiKTsKICAgIHJldHVybiB0aGlzLl9hLmdldChpbmRleCk7CiAgfQoKICB2b2lkIHNldChpbnQgaW5kZXgsIFQgdikgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCwgInNldCIpOwogICAgOjphc3NlcnQoaW5kZXggPCB0aGlzLnNpemUoKSwgInNldCIpOwogICAgdGhpcy5fYS5zZXQoaW5kZXgsIHYpOwogIH0KCiAgdm9pZCBkZXN0cnVjdCgpIHsKICAgIHRoaXMuX2EuZGVzdHJ1Y3QoKTsKICB9CgogIHZvaWQgcmVzZXJ2ZShpbnQgc2l6ZSkgewogICAgOjpiMnN0eWxlOjpoZWFwX3B0cjxUPiB4KHNpemUpOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0aGlzLnNpemUoKTsgaSsrKSB7CiAgICAgIHguc2V0KGksIHRoaXMuZ2V0KGkpKTsKICAgIH0KCXRoaXMuZGVzdHJ1Y3QoKTsKICAgIHRoaXMuX2EgPSB4OwoJeC5yZWxlYXNlKCk7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChpbnQgc2l6ZSkgewogICAgdGhpcy5yZXNlcnZlKHNpemUpOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoKSB7CiAgICB0aGlzLmNvbnN0cnVjdCg0KTsKICB9CgogIHZvaWQgcHVzaF9iYWNrKFQgdikgewogICAgaWYgKHRoaXMuc2l6ZSgpID09IHRoaXMuY2FwYWNpdHkoKSkgewogICAgICB0aGlzLnJlc2VydmUodGhpcy5jYXBhY2l0eSgpIDw8IDEpOwogICAgfQogICAgdGhpcy5fcysrOwogICAgdGhpcy5zZXQodGhpcy5zaXplKCkgLSAxLCB2KTsKICB9CgogIHZvaWQgcG9wX2JhY2soKSB7CiAgICA6OmFzc2VydCh0aGlzLnNpemUoKSA+IDAsICJwb3BfYmFjayIpOwogICAgdGhpcy5fcy0tOwogIH0KCiAgdm9pZCBjbGVhcigpIHsKICAgIHRoaXMuX3MgPSAwOwogIH0KfTsKCn0gIC8vIG5hbWVzcGFjZSBzdGQKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfU1REX1ZFQ1RPUhAAAAB0ZXN0aW5nL2Fzc2VydC5oIAUAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1RFU1RJTkdfQVNTRVJUX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9URVNUSU5HX0FTU0VSVF9ICgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8YjJzdHlsZS90b19zdHIuaD4KI2luY2x1ZGUgPGJzdHlsZS5oPgojaW5jbHVkZSA8YnN0eWxlL3N0ci5oPgojaW5jbHVkZSA8dGVzdGluZy90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewpuYW1lc3BhY2UgdGVzdGluZyB7CgppbnQgX2Fzc2VydGlvbl9jb3VudCA9IDA7CgovLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byB0ZXN0IHRoZSBfX0ZJTEVfXyBpbiBpbmNsdWRlZCBmaWxlcy4Kc3RyaW5nIGFzc2VydF9fRklMRV9fKCkgewogIHJldHVybiBfX0ZJTEVfXzsKfQoKdm9pZCBhc3NlcnRfdHJ1ZShib29sIHYsIHN0cmluZyBtc2cpIHsKICBfYXNzZXJ0aW9uX2NvdW50Kys7CiAgc3RyaW5nIHByZWZpeDsKICBpZiAodikgewogICAgcHJlZml4ID0gIlN1Y2Nlc3M6ICI7CiAgfSBlbHNlIHsKICAgIHByZWZpeCA9ICJGYWlsdXJlOiAiOwogIH0KICA6OmIyc3R5bGU6OnN0ZF9vdXQocHJlZml4KTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQobXNnKTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoIlxuIik7Cn0KCnZvaWQgYXNzZXJ0X3RydWUoYm9vbCB2KSB7CiAgYXNzZXJ0X3RydWUodiwgIm5vIGV4dHJhIGluZm9ybWF0aW9uLiIpOwp9Cgp2b2lkIGFzc2VydF9mYWxzZShib29sIHYsIHN0cmluZyBtc2cpIHsKICBhc3NlcnRfdHJ1ZSghdiwgbXNnKTsKfQoKdm9pZCBhc3NlcnRfZmFsc2UoYm9vbCB2KSB7CiAgYXNzZXJ0X3RydWUoIXYpOwp9CgovKgpUT0RPOiBNYWtlIHRoaXMgd29yay4gQ3VycmVudGx5IGFzc2VydF9lcXVhbF9fMiBjb25mbGljdHMgd2l0aCB0aGUgZm9sbG93aW5nIG9uZS4KdGVtcGxhdGUgPFQsIFQyPgp2b2lkIGFzc2VydF9lcXVhbChUIHQsIFQyIHQyLCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0X3RydWUodCA9PSB0MiwgbXNnKTsKfQoqLwoKdGVtcGxhdGUgPFQsIFQyPgp2b2lkIGFzc2VydF9lcXVhbChUIHQsIFQyIHQyKSB7CiAgYXNzZXJ0X3RydWUodCA9PSB0MiwgOjpzdHJfY29uY2F0KDo6YjJzdHlsZTo6dG9fc3RyKHQpLCAiICE9ICIsIDo6YjJzdHlsZTo6dG9fc3RyKHQyKSkpOwp9Cgp0ZW1wbGF0ZSA8VD4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUIHQyKSB7CiAgYXNzZXJ0X2VxdWFsPFQsIFQ+KHQsIHQyKTsKfQoKfSAgLy8gbmFtZXNwYWNlIHRlc3RpbmcKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfVEVTVElOR19BU1NFUlRfSAoPAAAAdGVzdGluZy90eXBlcy5orgEAAAojaWZuZGVmIEIyU1RZTEVfTElCX1RFU1RJTkdfVFlQRVNfSAojZGVmaW5lIEIyU1RZTEVfTElCX1RFU1RJTkdfVFlQRVNfSAoKI2luY2x1ZGUgPGJzdHlsZS90eXBlcy5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewpuYW1lc3BhY2UgdGVzdGluZyB7Cgp0eXBlZGVmIDo6c3RyaW5nIHN0cmluZzsKdHlwZWRlZiA6OnZvaWQgdm9pZDsKdHlwZWRlZiA6OmJvb2wgYm9vbDsKdHlwZWRlZiA6OmludCBpbnQ7CgovLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byB0ZXN0IHRoZSBfX0ZJTEVfXyBpbiBpbmNsdWRlZCBmaWxlcy4Kc3RyaW5nIHR5cGVzX19GSUxFX18oKSB7CiAgcmV0dXJuIF9fRklMRV9fOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdGVzdGluZwp9ICAvLyBuYWVtc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9URVNUSU5HX1RZUEVTX0g="
        ))
End Class
