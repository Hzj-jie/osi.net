Option Explicit On
Option Infer Off
Option Strict On
Imports osi.root.connector
Public NotInheritable Class b2style_lib
    Private Sub New()
    End Sub
    Public Shared ReadOnly data() As Byte = 
        Convert.FromBase64String(strcat_hint(CUInt(31311), 
            "CAAAAGFzc2VydC5oOAIAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQVNTRVJUX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3N0ZGlvLmg+CiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvc3RyLmg+Cgp2b2lkIGFzc2VydChzdHJpbmcgc3RhdGVtZW50LCBib29sIHYsIHN0cmluZyBtc2cpIHsKICBpZiAodikgcmV0dXJuOwogIGlmIChzdHJfZW1wdHkoc3RhdGVtZW50KSkgewogICAgYjJzdHlsZTo6c3RkX291dChtc2cpOwogIH0gZWxzZSB7CiAgICBiMnN0eWxlOjpzdGRfb3V0KHN0YXRlbWVudCArICI6ICIgKyBtc2cpOwogIH0KICBsb2dpYyAic3RvcCI7Cn0KCnZvaWQgYXNzZXJ0KGJvb2wgdiwgc3RyaW5nIG1zZykgewogIGFzc2VydCgiIiwgdiwgbXNnKTsKfQoKdm9pZCBhc3NlcnQoc3RyaW5nIHN0YXRlbWVudCwgYm9vbCB2KSB7CiAgYXNzZXJ0KHN0YXRlbWVudCwgdiwgIkFzc2VydGlvbiBmYWlsdXJlIik7Cn0KCnZvaWQgYXNzZXJ0KGJvb2wgdikgewogIGFzc2VydCgiIiwgdik7Cn0KCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQVNTRVJUX0gJAAAAYjJzdHlsZS5ouwAAAO+7vw0KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX0gNCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9IDQoNCiNpbmNsdWRlIDxic3R5bGUuaD4NCiNpbmNsdWRlIDxiMnN0eWxlL29wZXJhdG9ycy5oPg0KI2luY2x1ZGUgPGIyc3R5bGUvdWZsb2F0Lmg+DQoNCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9IDQoHAAAAcnVuLmNtZGsAAAANCmRlbCAvcyAqLnVufg0KLi5cLi5cLi5ccmVzb3VyY2VcZ2VuXHRhcl9nZW5cb3NpLnJvb3QudXR0IHRhcl9nZW4gLS1vdXRwdXQ9YjJzdHlsZV9saWINCm1vdmUgL1kgKi52YiAuLlwNCgkAAAB0ZXN0aW5nLmiFAQAACiNpZm5kZWYgVEVTVElOR19URVNUSU5HX0gKI2RlZmluZSBURVNUSU5HX1RFU1RJTkdfSAoKI2luY2x1ZGUgPGIyc3R5bGUvc3RkaW8uaD4KI2luY2x1ZGUgPHRlc3RpbmcvdHlwZXMuaD4KI2luY2x1ZGUgPHRlc3RpbmcvYXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7Cm5hbWVzcGFjZSB0ZXN0aW5nIHsKCnZvaWQgZmluaXNoZWQoKSB7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJUb3RhbCBhc3NlcnRpb25zOiAiKTsKICA6OmIyc3R5bGU6OnN0ZF9vdXQoX2Fzc2VydGlvbl9jb3VudCk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJcbiIpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdGVzdGluZwp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBURVNUSU5HX1RFU1RJTkdfSAoTAAAAYjJzdHlsZS9kZWxlZ2F0ZXMuaJgHAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX0RFTEVHQVRFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9ERUxFR0FURVNfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnRlbXBsYXRlIDxSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oKTsKCnRlbXBsYXRlIDxULCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMik7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNyk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFJUPgpkZWxlZ2F0ZSBSVCBmdW5jdGlvbihULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzKTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCk7Cgp0ZW1wbGF0ZSA8VCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1LCBSVD4KZGVsZWdhdGUgUlQgZnVuY3Rpb24oVCwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1KTsKCnRlbXBsYXRlIDxULCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUsIFQxNiwgUlQ+CmRlbGVnYXRlIFJUIGZ1bmN0aW9uKFQsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSwgVDE2KTsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfREVMRUdBVEVTX0gSAAAAYjJzdHlsZS9oZWFwX3B0ci5oIgQAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfSEVBUF9QVFJfSAojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfSEVBUF9QVFJfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKLy8gVHlwZSBUIGlzIHJlcXVpcmVkIHRvIHVzZSB0aGUgZGVhbGxvYyBpbnN0cnVjdGlvbi4KdGVtcGxhdGUgPFQ+CmNsYXNzIGhlYXBfcHRyIHsKICBUIF9hOwogIGludCBfczsKCiAgaW50IHNpemUoKSB7CiAgICByZXR1cm4gdGhpcy5fczsKICB9CgogIGJvb2wgZW1wdHkoKSB7CiAgICByZXR1cm4gdGhpcy5zaXplKCkgPT0gMDsKICB9CgogIHZvaWQgY29uc3RydWN0KCkgewogICAgdGhpcy5fcyA9IDA7CiAgfQoKICB2b2lkIGRlc3RydWN0KCkgewogICAgaWYgKHRoaXMuZW1wdHkoKSkgcmV0dXJuOwogICAgZGVhbGxvYyh0aGlzLl9hKTsKICAgIHRoaXMuY29uc3RydWN0KCk7CiAgfQoKICB2b2lkIGFsbG9jKGludCBzaXplKSB7CiAgICB0aGlzLmRlc3RydWN0KCk7CiAgICA6OmFzc2VydChzaXplID4gMCk7CiAgICBUIHhbc2l6ZV07CiAgICB0aGlzLl9hID0geDsKICAgIHRoaXMuX3MgPSBzaXplOwogICAgdW5kZWZpbmUoeCk7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChpbnQgc2l6ZSkgewogICAgdGhpcy5jb25zdHJ1Y3QoKTsKICAgIHRoaXMuYWxsb2Moc2l6ZSk7CiAgfQoKICBUIGdldChpbnQgaW5kZXgpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDApOwogICAgOjphc3NlcnQoaW5kZXggPCB0aGlzLnNpemUoKSk7CiAgICByZXR1cm4gdGhpcy5fYVtpbmRleF07CiAgfQoKICB2b2lkIHNldChpbnQgaW5kZXgsIFQgdikgewogICAgOjphc3NlcnQoaW5kZXggPj0gMCk7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpKTsKICAgIHRoaXMuX2FbaW5kZXhdID0gdjsKICB9CgogIHZvaWQgcmVsZWFzZSgpIHsKICAgIHRoaXMuY29uc3RydWN0KCk7CiAgfQp9OwoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9IRUFQX1BUUl9IFwAAAGIyc3R5bGUvbG9hZGVkX21ldGhvZC5oeQMAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfTE9BREVEX01FVEhPRF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9MT0FERURfTUVUSE9EX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3R5cGVzLmg+CiNpbmNsdWRlIDxic3R5bGUvbG9hZF9tZXRob2QuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnZvaWQgbG9hZF9tZXRob2Qoc3RyaW5nIG0pIHsKICA6OmxvYWRfbWV0aG9kKG0pOwp9Cgp0ZW1wbGF0ZSA8VD4KVCBleGVjdXRlX2xvYWRlZF9tZXRob2QoKSB7CiAgVCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImludGVycnVwdCBleGVjdXRlX2xvYWRlZF9tZXRob2QgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgcmVzdWx0IjsKI2Vsc2UgI2lmZGVmIEIyU1RZTEUKICBsb2dpYyAiaW50ZXJydXB0IGV4ZWN1dGVfbG9hZGVkX21ldGhvZCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQiOwojZWxzZQogIC8vIFRPRE86IFRyaWdnZXIgYW4gI2Vycm9yCiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCnRlbXBsYXRlIDxULCBSVD4KUlQgZXhlY3V0ZV9sb2FkZWRfbWV0aG9kKFQgcCkgewogIFJUIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiaW50ZXJydXB0IGV4ZWN1dGVfbG9hZGVkX21ldGhvZCBwIHJlc3VsdCI7CiNlbHNlICNpZmRlZiBCMlNUWUxFCiAgbG9naWMgImludGVycnVwdCBleGVjdXRlX2xvYWRlZF9tZXRob2QgYjJzdHlsZV9fcCBiMnN0eWxlX19yZXN1bHQiOwojZWxzZQogIC8vIFRPRE86IFRyaWdnZXIgYW4gI2Vycm9yCiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCQp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQoKI2VuZGlmICAvLyBCMlNUWUxFX0xJQl9CMlNUWUxFX0xPQURFRF9NRVRIT0RfSAoTAAAAYjJzdHlsZS9vcGVyYXRvcnMuaLgyAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX09QRVJBVE9SU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9PUEVSQVRPUlNfSAoKI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KI2luY2x1ZGUgPGJzdHlsZS9pbnQuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCmJvb2wgYW5kKGJvb2wgaSwgYm9vbCBqKSB7CiAgaWYgKGkpIHJldHVybiBqOwogIHJldHVybiBmYWxzZTsKfQoKYm9vbCBvcihib29sIGksIGJvb2wgaikgewogIGlmIChpKSByZXR1cm4gdHJ1ZTsKICBpZiAoaikgcmV0dXJuIHRydWU7CiAgcmV0dXJuIGZhbHNlOwp9Cgpib29sIG5vdChib29sIGkpIHsKICBpZiAoaSkgcmV0dXJuIGZhbHNlOwogIHJldHVybiB0cnVlOwp9CgovLyBUT0RPOiBDb25zaWRlciB0byBhdm9pZCBhZGRpbmcgIl9wcmUiIGZvciBvcGVyYXRvciAhLgpib29sIG5vdF9wcmUoYm9vbCBpKSB7CiAgcmV0dXJuIG5vdChpKTsKfQoKYm9vbCBlcXVhbChzdHJpbmcgaSwgc3RyaW5nIGopIHsKICByZXR1cm4gOjpzdHJfZXF1YWwoaSwgaik7Cn0KCmJvb2wgbm90X2VxdWFsKHN0cmluZyBpLCBzdHJpbmcgaikgewogIHJldHVybiBub3QoZXF1YWwoaSwgaikpOwp9Cgpib29sIGVxdWFsKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgcmV0dXJuIDo6ZXF1YWwoaSwgaik7Cn0KCmJvb2wgbm90X2VxdWFsKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gOjplcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBlcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gOjplcXVhbChpLCBqKTsKfQoKYm9vbCBub3RfZXF1YWwoaW50IGksIGludCBqKSB7CiAgcmV0dXJuIG5vdChlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZXF1YWwoYm9vbCBpLCBib29sIGopIHsKICBpZiAoaSkgcmV0dXJuIGo7CiAgcmV0dXJuIG5vdChqKTsKfQoKYm9vbCBub3RfZXF1YWwoYm9vbCBpLCBib29sIGopIHsKICByZXR1cm4gbm90KGVxdWFsKGksIGopKTsKfQoKYm9vbCBncmVhdGVyX3RoYW4oYmlndWludCBpLCBiaWd1aW50IGopIHsKICBib29sIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAibW9yZSByZXN1bHQgaSBqIjsKI2Vsc2UKICBsb2dpYyAibW9yZSBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBncmVhdGVyX3RoYW4obG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gZ3JlYXRlcl90aGFuKDo6dG9fYmlndWludChpKSwgOjp0b19iaWd1aW50KGopKTsKfQoKYm9vbCBncmVhdGVyX3RoYW4oaW50IGksIGludCBqKSB7CiAgcmV0dXJuIGdyZWF0ZXJfdGhhbig6OnRvX2JpZ3VpbnQoaSksIDo6dG9fYmlndWludChqKSk7Cn0KCmJvb2wgbGVzc190aGFuKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImxlc3MgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImxlc3MgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCmJvb2wgbGVzc190aGFuKGxvbmcgaSwgbG9uZyBqKSB7CiAgcmV0dXJuIGxlc3NfdGhhbig6OnRvX2JpZ3VpbnQoaSksIDo6dG9fYmlndWludChqKSk7Cn0KCmJvb2wgbGVzc190aGFuKGludCBpLCBpbnQgaikgewogIHJldHVybiBsZXNzX3RoYW4oOjp0b19iaWd1aW50KGkpLCA6OnRvX2JpZ3VpbnQoaikpOwp9Cgpib29sIGxlc3Nfb3JfZXF1YWwoYmlndWludCBpLCBiaWd1aW50IGopIHsKICByZXR1cm4gb3IobGVzc190aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgbGVzc19vcl9lcXVhbChsb25nIGksIGxvbmcgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKGludCBpLCBpbnQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgcmV0dXJuIG9yKGdyZWF0ZXJfdGhhbihpLCBqKSwgZXF1YWwoaSwgaikpOwp9Cgpib29sIGdyZWF0ZXJfb3JfZXF1YWwobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJvb2wgZ3JlYXRlcl9vcl9lcXVhbChpbnQgaSwgaW50IGopIHsKICByZXR1cm4gb3IoZ3JlYXRlcl90aGFuKGksIGopLCBlcXVhbChpLCBqKSk7Cn0KCmJpZ3VpbnQgYWRkKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9Cgpsb25nIGFkZChsb25nIGksIGxvbmcgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyhpKTsKfQoKaW50IGFkZChpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChpKTsKfQoKYnl0ZSBhZGQoYnl0ZSBpLCBieXRlIGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2J5dGUoaSk7Cn0KCnN0cmluZyBhZGQoc3RyaW5nIGksIHN0cmluZyBqKSB7CiAgcmV0dXJuIDo6c3RyX2NvbmNhdChpLCBqKTsKfQoKYmlndWludCBtaW51cyhiaWd1aW50IGksIGJpZ3VpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgInN1YnRyYWN0IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmxvbmcgbWludXMobG9uZyBpLCBsb25nIGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgbWludXMoaW50IGksIGludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInN1YnRyYWN0IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KGkpOwp9CgpiaWd1aW50IG11bHRpcGx5KGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgIm11bHRpcGx5IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAibXVsdGlwbHkgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKbG9uZyBtdWx0aXBseShsb25nIGksIGxvbmcgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJtdWx0aXBseSBpIGkgaiI7CiNlbHNlCiAgbG9naWMgIm11bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcoaSk7Cn0KCmludCBtdWx0aXBseShpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAibXVsdGlwbHkgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJtdWx0aXBseSBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9pbnQoaSk7Cn0KCmJpZ3VpbnQgZGl2aWRlKGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImRpdmlkZSByZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZGl2aWRlIGIyc3R5bGVfX3Jlc3VsdCBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcmVzdWx0Owp9Cgpsb25nIGRpdmlkZShsb25nIGksIGxvbmcgaikgewogIGxvbmcgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJkaXZpZGUgcmVzdWx0IEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGkgaiI7CiNlbHNlCiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcocmVzdWx0KTsKfQoKaW50IGRpdmlkZShpbnQgaSwgaW50IGopIHsKICBpbnQgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJkaXZpZGUgcmVzdWx0IEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIGkgaiI7CiNlbHNlCiAgbG9naWMgImRpdmlkZSBiMnN0eWxlX19yZXN1bHQgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChyZXN1bHQpOwp9CgpiaWd1aW50IG1vZChiaWd1aW50IGksIGJpZ3VpbnQgaikgewogIGJpZ3VpbnQgcmVzdWx0OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJkaXZpZGUgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImRpdmlkZSBAQHByZWZpeGVzQHRlbXBzQHN0cmluZyBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKbG9uZyBtb2QobG9uZyBpLCBsb25nIGopIHsKICBsb25nIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJkaXZpZGUgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKHJlc3VsdCk7Cn0KCmludCBtb2QoaW50IGksIGludCBqKSB7CiAgaW50IHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZGl2aWRlIEBAcHJlZml4ZXNAdGVtcHNAc3RyaW5nIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJkaXZpZGUgQEBwcmVmaXhlc0B0ZW1wc0BzdHJpbmcgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9pbnQocmVzdWx0KTsKfQoKYmlndWludCBwb3dlcihiaWd1aW50IGksIGJpZ3VpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJwb3dlciBpIGkgaiI7CiNlbHNlCiAgbG9naWMgInBvd2VyIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmxvbmcgcG93ZXIobG9uZyBpLCBsb25nIGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAicG93ZXIgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJwb3dlciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9sb25nKGkpOwp9CgppbnQgcG93ZXIoaW50IGksIGludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgInBvd2VyIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAicG93ZXIgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5faW50KGkpOwp9CgpiaWd1aW50IGJpdF9hbmQoYmlndWludCBpLCBiaWd1aW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYW5kIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiYW5kIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmxvbmcgYml0X2FuZChsb25nIGksIGxvbmcgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhbmQgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJhbmQgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKaW50IGJpdF9hbmQoaW50IGksIGludCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFuZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImFuZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9CgpiaWd1aW50IGJpdF9vcihiaWd1aW50IGksIGJpZ3VpbnQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJvciBpIGkgaiI7CiNlbHNlCiAgbG9naWMgIm9yIGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCmxvbmcgYml0X29yKGxvbmcgaSwgbG9uZyBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgIm9yIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAib3IgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKaW50IGJpdF9vcihpbnQgaSwgaW50IGopIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAib3IgaSBpIGoiOwojZWxzZQogIGxvZ2ljICJvciBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9CgpiaWd1aW50IHNlbGZfaW5jX3Bvc3QoYmlndWludCYgeCkgewogIGJpZ3VpbnQgciA9IHg7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIHI7Cn0KCmxvbmcgc2VsZl9pbmNfcG9zdChsb25nJiB4KSB7CiAgbG9uZyByID0geDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiYWRkIHggeCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbHNlCiAgbG9naWMgImFkZCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyhyKTsKfQoKaW50IHNlbGZfaW5jX3Bvc3QoaW50JiB4KSB7CiAgaW50IHIgPSB4OwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbmRpZgogIHJldHVybiA6OmZpdF9pbl9pbnQocik7Cn0KCmJpZ3VpbnQgc2VsZl9kZWNfcG9zdChiaWd1aW50JiB4KSB7CiAgYmlndWludCByID0geDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIHI7Cn0KCmxvbmcgc2VsZl9kZWNfcG9zdChsb25nJiB4KSB7CiAgbG9uZyByID0geDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcocik7Cn0KCmludCBzZWxmX2RlY19wb3N0KGludCYgeCkgewogIGludCByID0geDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludChyKTsKfQoKYmlndWludCBzZWxmX2luY19wcmUoYmlndWludCYgeCkgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJhZGQgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAiYWRkIGIyc3R5bGVfX3ggYjJzdHlsZV9feCBAQHByZWZpeGVzQGNvbnN0YW50c0BpbnRfMSI7CiNlbmRpZgogIHJldHVybiB4Owp9Cgpsb25nIHNlbGZfaW5jX3ByZShsb25nJiB4KSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2xvbmcoeCk7Cn0KCmludCBzZWxmX2luY19wcmUoaW50JiB4KSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImFkZCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJhZGQgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludCh4KTsKfQoKYmlndWludCBzZWxmX2RlY19wcmUoYmlndWludCYgeCkgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4geDsKfQoKbG9uZyBzZWxmX2RlY19wcmUobG9uZyYgeCkgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJzdWJ0cmFjdCB4IHggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZWxzZQogIGxvZ2ljICJzdWJ0cmFjdCBiMnN0eWxlX194IGIyc3R5bGVfX3ggQEBwcmVmaXhlc0Bjb25zdGFudHNAaW50XzEiOwojZW5kaWYKICByZXR1cm4gOjpmaXRfaW5fbG9uZyh4KTsKfQoKaW50IHNlbGZfZGVjX3ByZShpbnQmIHgpIHsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAic3VidHJhY3QgeCB4IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2Vsc2UKICBsb2dpYyAic3VidHJhY3QgYjJzdHlsZV9feCBiMnN0eWxlX194IEBAcHJlZml4ZXNAY29uc3RhbnRzQGludF8xIjsKI2VuZGlmCiAgcmV0dXJuIDo6Zml0X2luX2ludCh4KTsKfQoKYmlndWludCBleHRyYWN0KGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByOwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJleHRyYWN0IHIgQEBwcmVmaXhlc0B0ZW1wc0BiaWd1aW50IGkgaiI7CiNlbHNlCiAgbG9naWMgImV4dHJhY3QgYjJzdHlsZV9fciBAQHByZWZpeGVzQHRlbXBzQGJpZ3VpbnQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgZXh0cmFjdF9yZW1haW5kZXIoYmlndWludCBpLCBiaWd1aW50IGopIHsKICBiaWd1aW50IHI7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImV4dHJhY3QgQEBwcmVmaXhlc0B0ZW1wc0BiaWd1aW50IHIgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZXh0cmFjdCBAQHByZWZpeGVzQHRlbXBzQGJpZ3VpbnQgYjJzdHlsZV9fciBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcjsKfQoKYmlndWludCBsZWZ0X3NoaWZ0KGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByOwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJsZWZ0X3NoaWZ0IHIgaSBqIjsKI2Vsc2UKICBsb2dpYyAibGVmdF9zaGlmdCBiMnN0eWxlX19yIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByOwp9CgpiaWd1aW50IHJpZ2h0X3NoaWZ0KGJpZ3VpbnQgaSwgYmlndWludCBqKSB7CiAgYmlndWludCByOwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJyaWdodF9zaGlmdCByIGkgaiI7CiNlbHNlCiAgbG9naWMgInJpZ2h0X3NoaWZ0IGIyc3R5bGVfX3IgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHI7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGludCBqKSB7CiAgcmV0dXJuIGxlZnRfc2hpZnQoaSwgOjp0b19iaWd1aW50KGopKTsKfQoKYmlndWludCByaWdodF9zaGlmdChiaWd1aW50IGksIGludCBqKSB7CiAgcmV0dXJuIHJpZ2h0X3NoaWZ0KGksIDo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgbGVmdF9zaGlmdChiaWd1aW50IGksIGxvbmcgaikgewogIHJldHVybiBsZWZ0X3NoaWZ0KGksIDo6dG9fYmlndWludChqKSk7Cn0KCmJpZ3VpbnQgcmlnaHRfc2hpZnQoYmlndWludCBpLCBsb25nIGopIHsKICByZXR1cm4gcmlnaHRfc2hpZnQoaSwgOjp0b19iaWd1aW50KGopKTsKfQoKaW50IGxlZnRfc2hpZnQoaW50IGksIGludCBqKSB7CiAgcmV0dXJuIDo6dG9faW50KAogICAgbGVmdF9zaGlmdCg6OnRvX2JpZ3VpbnQoaSksCiAgICAgICAgICAgICAgIDo6dG9fYmlndWludChqKSkKICApOwp9CgppbnQgcmlnaHRfc2hpZnQoaW50IGksIGludCBqKSB7CiAgcmV0dXJuIDo6dG9faW50KAogICAgcmlnaHRfc2hpZnQoOjp0b19iaWd1aW50KGkpLAogICAgICAgICAgICAgICAgOjp0b19iaWd1aW50KGopKQogICk7Cn0KCmxvbmcgbGVmdF9zaGlmdChsb25nIGksIGxvbmcgaikgewogIHJldHVybiA6OnRvX2xvbmcoCiAgICBsZWZ0X3NoaWZ0KDo6dG9fYmlndWludChpKSwKICAgICAgICAgICAgICAgOjp0b19iaWd1aW50KGopKQogICk7Cn0KCmxvbmcgcmlnaHRfc2hpZnQobG9uZyBpLCBsb25nIGopIHsKICByZXR1cm4gOjp0b19sb25nKAogICAgcmlnaHRfc2hpZnQoOjp0b19iaWd1aW50KGkpLAogICAgICAgICAgICAgICAgOjp0b19iaWd1aW50KGopKQogICk7Cn0KCnZvaWQgc2VsZl9hbmQoYm9vbCYgaSwgYm9vbCBqKSB7CiAgaSA9IGFuZChpLCBqKTsKfQoKdm9pZCBzZWxmX29yKGJvb2wmIGksIGJvb2wgaikgewogIGkgPSBvcihpLCBqKTsKfQoKdm9pZCBzZWxmX2FkZChiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gYWRkKGksIGopOwp9Cgp2b2lkIHNlbGZfYWRkKGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBhZGQoaSwgaik7Cn0KCnZvaWQgc2VsZl9hZGQoaW50JiBpLCBpbnQgaikgewogIGkgPSBhZGQoaSwgaik7Cn0KCnZvaWQgc2VsZl9hZGQoYnl0ZSYgaSwgYnl0ZSBqKSB7CiAgaSA9IGFkZChpLCBqKTsKfQoKdm9pZCBzZWxmX21pbnVzKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBtaW51cyhpLCBqKTsKfQoKdm9pZCBzZWxmX21pbnVzKGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBtaW51cyhpLCBqKTsKfQoKdm9pZCBzZWxmX21pbnVzKGludCYgaSwgaW50IGopIHsKICBpID0gbWludXMoaSwgaik7Cn0KCnZvaWQgc2VsZl9tdWx0aXBseShiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gbXVsdGlwbHkoaSwgaik7Cn0KCnZvaWQgc2VsZl9tdWx0aXBseShsb25nJiBpLCBsb25nIGopIHsKICBpID0gbXVsdGlwbHkoaSwgaik7Cn0KCnZvaWQgc2VsZl9tdWx0aXBseShpbnQmIGksIGludCBqKSB7CiAgaSA9IG11bHRpcGx5KGksIGopOwp9Cgp2b2lkIHNlbGZfZGl2aWRlKGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBkaXZpZGUoaSwgaik7Cn0KCnZvaWQgc2VsZl9kaXZpZGUobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IGRpdmlkZShpLCBqKTsKfQoKdm9pZCBzZWxmX2RpdmlkZShpbnQmIGksIGludCBqKSB7CiAgaSA9IGRpdmlkZShpLCBqKTsKfQoKdm9pZCBzZWxmX21vZChiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gbW9kKGksIGopOwp9Cgp2b2lkIHNlbGZfbW9kKGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBtb2QoaSwgaik7Cn0KCnZvaWQgc2VsZl9tb2QoaW50JiBpLCBpbnQgaikgewogIGkgPSBtb2QoaSwgaik7Cn0KCnZvaWQgc2VsZl9wb3dlcihiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gcG93ZXIoaSwgaik7Cn0KCnZvaWQgc2VsZl9wb3dlcihsb25nJiBpLCBsb25nIGopIHsKICBpID0gcG93ZXIoaSwgaik7Cn0KCnZvaWQgc2VsZl9wb3dlcihpbnQmIGksIGludCBqKSB7CiAgaSA9IHBvd2VyKGksIGopOwp9Cgp2b2lkIHNlbGZfYml0X2FuZChiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gYml0X2FuZChpLCBqKTsKfQoKdm9pZCBzZWxmX2JpdF9hbmQobG9uZyYgaSwgbG9uZyBqKSB7CiAgaSA9IGJpdF9hbmQoaSwgaik7Cn0KCnZvaWQgc2VsZl9iaXRfYW5kKGludCYgaSwgaW50IGopIHsKICBpID0gYml0X2FuZChpLCBqKTsKfQoKdm9pZCBzZWxmX2JpdF9vcihiaWd1aW50JiBpLCBiaWd1aW50IGopIHsKICBpID0gYml0X29yKGksIGopOwp9Cgp2b2lkIHNlbGZfYml0X29yKGxvbmcmIGksIGxvbmcgaikgewogIGkgPSBiaXRfb3IoaSwgaik7Cn0KCnZvaWQgc2VsZl9iaXRfb3IoaW50JiBpLCBpbnQgaikgewogIGkgPSBiaXRfb3IoaSwgaik7Cn0KCnZvaWQgc2VsZl9sZWZ0X3NoaWZ0KGJpZ3VpbnQmIGksIGJpZ3VpbnQgaikgewogIGkgPSBsZWZ0X3NoaWZ0KGksIGopOwp9Cgp2b2lkIHNlbGZfcmlnaHRfc2hpZnQoYmlndWludCYgaSwgYmlndWludCBqKSB7CiAgaSA9IHJpZ2h0X3NoaWZ0KGksIGopOwp9Cgp2b2lkIHNlbGZfbGVmdF9zaGlmdChsb25nJiBpLCBsb25nIGopIHsKICBpID0gbGVmdF9zaGlmdChpLCBqKTsKfQoKdm9pZCBzZWxmX3JpZ2h0X3NoaWZ0KGxvbmcmIGksIGxvbmcgaikgewogIGkgPSByaWdodF9zaGlmdChpLCBqKTsKfQoKdm9pZCBzZWxmX2xlZnRfc2hpZnQoaW50JiBpLCBpbnQgaikgewogIGkgPSBsZWZ0X3NoaWZ0KGksIGopOwp9Cgp2b2lkIHNlbGZfcmlnaHRfc2hpZnQoaW50JiBpLCBpbnQgaikgewogIGkgPSByaWdodF9zaGlmdChpLCBqKTsKfQoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9PUEVSQVRPUlNfSAoWAAAAYjJzdHlsZS9yYXdfaGVhcF9wdHIuaNgDAADvu78NCi8qIFRPRE86IEltcGxlbWVudGF0aW9uDQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfUkFXX0hFQVBfUFRSDQojZGVmaW5lIEIyU1RZTEVfTElCX0IyU1RZTEVfUkFXX0hFQVBfUFRSDQoNCiNpbmNsdWRlIDxiMnN0eWxlLmg+DQojaW5jbHVkZSA8YXNzZXJ0Lmg+DQoNCm5hbWVzcGFjZSBiMnN0eWxlIHsNCg0KY2xhc3MgcmF3X2hlYXBfcHRyIHsNCiAgdHlwZV9wdHIgcDsNCg0KI2lmZGVmIEIzU1RZTEUNCiAgYm9vbCBpc19udWxsKCkgew0KICAgIGJvb2wgcjsNCiAgICBsb2dpYyAiZW1wdHkgciB0aGlzLnAiOw0KICAgIHJldHVybiByOw0KICB9DQojZWxzZQ0KICBib29sIGlzX251bGwoKSB7DQogICAgYm9vbCByOw0KICAgIGxvZ2ljICJlbXB0eSBiMnN0eWxlX19yIHRoaXMucCI7DQogICAgcmV0dXJuIHI7DQogIH0NCiNlbmRpZg0KDQogIHRlbXBsYXRlIDxUPg0KICBUIGdldCgpIHsNCiAgICB0eXBlX3B0ciB2ID0gdGhpcy5wOw0KICAgIHN0YXRpY19jYXN0KHYsIFQpOw0KICAgIHJldHVybiB2Ow0KICB9DQoNCiAgdm9pZCBzZXRfbnVsbCgpIHsNCiAgICB0eXBlX3B0ciB4Ow0KICAgIHRoaXMucCA9IHg7DQogIH0NCg0KICAvLyBUT0RPOiBGaW5kIGEgZ29vZCB3YXkgdG8gYXV0b21hdGljYWxseSBkZWFsbG9jIGhlYXAgcmVzb3VyY2VzLg0KICB0ZW1wbGF0ZSA8VD4NCiAgdm9pZCBkZXN0cnVjdCgpIHsNCiAgICA6OmFzc2VydCghdGhpcy5pc19udWxsKCkpOw0KICAgIFQgeCA9IHRoaXMuZ2V0PFQ+KCk7DQogICAgZGVhbGxvYyh4KTsNCiAgICB0eXBlX3B0ciB4Ow0KICAgIHRoaXMucCA9IHg7DQogIH0NCg0KICB0ZW1wbGF0ZSA8VD4NCiAgdm9pZCBzZXQoVCB0KSB7DQogICAgc3RhdGljX2Nhc3QodCwgdHlwZV9wdHIpOw0KICAgIHRoaXMucCA9IHQ7DQogIH0NCn07DQoNCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlDQoNCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9SQVdfSEVBUF9QVFINCiovDQoNAAAAYjJzdHlsZS9yZWYuaDcDAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1JFRl9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9SRUZfSAoKI2luY2x1ZGUgPGIyc3R5bGUuaD4KI2luY2x1ZGUgPGIyc3R5bGUvaGVhcF9wdHIuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgoKbmFtZXNwYWNlIGIyc3R5bGUgewoKdGVtcGxhdGUgPFQ+CmNsYXNzIHJlZiB7CiAgaGVhcF9wdHI8VD4gX2E7CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICB0aGlzLl9hLmRlc3RydWN0KCk7CiAgfQoKICBib29sIGVtcHR5KCkgewogICAgcmV0dXJuIHRoaXMuX2EuZW1wdHkoKTsKICB9CgogIHZvaWQgc2V0KFQgdikgewogICAgaWYgKHRoaXMuZW1wdHkoKSkgdGhpcy5fYS5hbGxvYygxKTsKICAgIHRoaXMuX2Euc2V0KDAsIHYpOwogIH0KCiAgdm9pZCBhbGxvYygpIHsKICAgIFQgdjsKICAgIHRoaXMuc2V0KHYpOwogIH0KCiAgVCBnZXQoKSB7CiAgICA6OmFzc2VydCghdGhpcy5lbXB0eSgpKTsKICAgIHJldHVybiB0aGlzLl9hLmdldCgwKTsKICB9CgogIFQgcmVsZWFzZSgpIHsKICAgIFQgciA9IHRoaXMuZ2V0KCk7Cgl0aGlzLmRlc3RydWN0KCk7CiAgICByZXR1cm4gcjsKICB9CgogIHZvaWQgY29uc3RydWN0KCkge30KCiAgdm9pZCBjb25zdHJ1Y3QoVCB2KSB7CiAgICB0aGlzLmNvbnN0cnVjdCgpOwogICAgdGhpcy5zZXQodik7CiAgfQoKICB2b2lkIGNvbnN0cnVjdChyZWY8VD4mIG90aGVyKSB7CiAgICB0aGlzLmNvbnN0cnVjdChvdGhlci5yZWxlYXNlKCkpOwogIH0KfTsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfUkVGX0gKDwAAAGIyc3R5bGUvc3RkaW8uaPwCAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1NURElPX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1NURElPX0gKCiNpbmNsdWRlIDxiMnN0eWxlL3RvX3N0ci5oPgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8c3RkaW8uaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCnZvaWQgc3RkX291dChzdHJpbmcgaSkgewogIDo6c3RkX291dChpKTsKfQoKdm9pZCBzdGRfZXJyKHN0cmluZyBpKSB7CiAgOjpzdGRfZXJyKGkpOwp9Cgp0ZW1wbGF0ZSA8VD4Kdm9pZCBzdGRfb3V0KFQgaSkgewogIHN0ZF9vdXQodG9fc3RyKGkpKTsKfQoKdGVtcGxhdGUgPFQ+CnZvaWQgc3RkX2VycihUIGkpIHsKICBzdGRfZXJyKHRvX3N0cihpKSk7Cn0KCi8vIFRPRE86IEltcGxlbWVudCB0ZW1wbGF0ZSBpbmZlcmVuY2UuCnZvaWQgc3RkX291dChib29sIGkpIHsKICBzdGRfb3V0PGJvb2w+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoYm9vbCBpKSB7CiAgc3RkX2Vycjxib29sPihpKTsKfQoKdm9pZCBzdGRfb3V0KGludCBpKSB7CiAgc3RkX291dDxpbnQ+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoaW50IGkpIHsKICBzdGRfZXJyPGludD4oaSk7Cn0KCnZvaWQgc3RkX291dChiaWd1aW50IGkpIHsKICBzdGRfb3V0PGJpZ3VpbnQ+KGkpOwp9Cgp2b2lkIHN0ZF9lcnIoYmlndWludCBpKSB7CiAgc3RkX2VycjxiaWd1aW50PihpKTsKfQoKfSAgLy8gbmFtZXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfQjJTVFlMRV9TVERJT19ICg0AAABiMnN0eWxlL3N0ci5oWQMAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9CMlNUWUxFX1NUUl9ICgojaW5jbHVkZSA8YjJzdHlsZS90eXBlcy5oPgojaW5jbHVkZSA8YnN0eWxlL3N0ci5oPgojaW5jbHVkZSA8YXNzZXJ0Lmg+CgpuYW1lc3BhY2UgYjJzdHlsZSB7CgpzdHJpbmcgX3N0cl9taWQoc3RyaW5nIHMsIGludCBpLCBpbnQgbCkgewogIHN0cmluZyByOwojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJjdXRfbGVuIHIgcyBpIGwiOwojZWxzZSAjaWZkZWYgQjJTVFlMRQogIGxvZ2ljICJjdXRfbGVuIGIyc3R5bGVfX3IgYjJzdHlsZV9fcyBiMnN0eWxlX19pIGIyc3R5bGVfX2wiOwojZWxzZQogIC8vIFRPRE86IFRyaWdnZXIgYW4gI2Vycm9yLgojZW5kaWYKICByZXR1cm4gcjsKfQoKc3RyaW5nIHN0cl9taWQoc3RyaW5nIHMsIGludCBpLCBpbnQgbCkgewogIDo6YXNzZXJ0KF9fU1RBVEVNRU5UX18gKyAiQCIgKyBfX0ZJTEVfXywgKGkgPj0gMCkgJiYgKGwgPj0gMCkpOwogIHJldHVybiBfc3RyX21pZChzLCBpLCBsKTsKfQoKYm9vbCBzdHJfZW5kc193aXRoKHN0cmluZyBpLCBzdHJpbmcgaikgewogIGludCBpbCA9IDo6c3RyX2xlbihpKTsKICBpbnQgamwgPSA6OnN0cl9sZW4oaik7CiAgaWYgKGlsIDwgamwpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgaWYgKGlsID09IGpsKSB7CiAgICByZXR1cm4gOjpzdHJfZXF1YWwoaSwgaik7CiAgfQogIHN0cmluZyBzaSA9IHN0cl9taWQoaSwgaWwgLSBqbCwgamwpOwogIHJldHVybiA6OnN0cl9lcXVhbChzaSwgaik7Cn0KCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfU1RSX0gKEAAAAGIyc3R5bGUvdG9fc3RyLmhDBgAA77u/DQojaWZuZGVmIEIyU1RZTEVfTElCX0IyU1RZTEVfVE9fU1RSX0gNCiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9UT19TVFJfSA0KDQojaW5jbHVkZSA8YjJzdHlsZS9sb2FkZWRfbWV0aG9kLmg+DQojaW5jbHVkZSA8YjJzdHlsZS9vcGVyYXRvcnMuaD4NCiNpbmNsdWRlIDxsaW1pdHMuaD4NCg0KbmFtZXNwYWNlIGIyc3R5bGUgew0KDQpzdHJpbmcgdG9fc3RyKHN0cmluZyBpKSB7DQogIHJldHVybiBpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGJ5dGUgaSkgew0KICByZXR1cm4gOjp0b19zdHIoaSk7DQp9DQoNCnN0cmluZyB0b19zdHIoYm9vbCBpKSB7DQogIGlmIChpKSByZXR1cm4gIlRydWUiOw0KICByZXR1cm4gIkZhbHNlIjsNCn0NCg0Kc3RyaW5nIGxlZ2FjeV9iaWd1aW50X3RvX3N0cihiaWd1aW50IGkpIHsNCiAgaWYgKGkgPT0gMEwpIHsNCiAgICByZXR1cm4gIjAiOw0KICB9DQogIHN0cmluZyBzOw0KICB3aGlsZSAoaSA+IDBMKSB7DQogICAgaW50IGIgPSA6OnRvX2ludChtb2QoaSwgMTBMKSk7DQogICAgaSAvPSAxMEw7DQogICAgYiArPSA0ODsNCiAgICBzID0gOjpzdHJfY29uY2F0KDo6dG9fc3RyKDo6dG9fYnl0ZShiKSksIHMpOw0KICB9DQogIHJldHVybiBzOw0KfQ0KDQpzdHJpbmcgYmlndWludF90b19zdHIoYmlndWludCBpKSB7DQogIGxvYWRfbWV0aG9kKCJiaWdfdWludF90b19zdHIiKTsNCiAgcmV0dXJuIGV4ZWN1dGVfbG9hZGVkX21ldGhvZDxiaWd1aW50LCBzdHJpbmc+KGkpOw0KfQ0KDQpzdHJpbmcgdG9fc3RyKGJpZ3VpbnQgaSkgew0KICByZXR1cm4gYmlndWludF90b19zdHIoaSk7DQp9DQoNCnRlbXBsYXRlIDxUPg0Kc3RyaW5nIGJpZ3VpbnRfdG9fc3RyX2ZvcndhcmQoVCBpLCBUIE1BWCkgew0KICBpZiAoaSA8PSBNQVgpIHsNCiAgICByZXR1cm4gYmlndWludF90b19zdHIoOjp0b19iaWd1aW50KGkpKTsNCiAgfQ0KICBpIC09IE1BWDsNCiAgaSA9IE1BWCAtIGk7DQogIFQgXzIgPSAyOw0KICBpICs9IF8yOw0KICByZXR1cm4gOjpzdHJfY29uY2F0KCItIiwgYmlndWludF90b19zdHIoOjp0b19iaWd1aW50KGkpKSk7DQp9DQoNCnN0cmluZyBpbnRfdG9fc3RyKGludCBpKSB7DQogIHJldHVybiBiaWd1aW50X3RvX3N0cl9mb3J3YXJkPGludD4oaSwgOjpJTlRfTUFYKTsNCn0NCg0Kc3RyaW5nIHVmbG9hdF90b19zdHIodWZsb2F0IGkpIHsNCiAgbG9hZF9tZXRob2QoImJpZ191ZGVjX3RvX3N0ciIpOw0KICByZXR1cm4gZXhlY3V0ZV9sb2FkZWRfbWV0aG9kPHVmbG9hdCwgc3RyaW5nPihpKTsNCn0NCg0Kc3RyaW5nIGxvbmdfdG9fc3RyKGxvbmcgaSkgew0KICByZXR1cm4gYmlndWludF90b19zdHJfZm9yd2FyZDxsb25nPihpLCA6OkxPTkdfTUFYKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihpbnQgaSkgew0KICByZXR1cm4gaW50X3RvX3N0cihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cih1ZmxvYXQgaSkgew0KICByZXR1cm4gdWZsb2F0X3RvX3N0cihpKTsNCn0NCg0Kc3RyaW5nIHRvX3N0cihsb25nIGkpIHsNCiAgcmV0dXJuIGxvbmdfdG9fc3RyKGkpOw0KfQ0KDQp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQ0KDQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVE9fU1RSX0gNCg8AAABiMnN0eWxlL3R5cGVzLmiaAQAA77u/CiNpZm5kZWYgQjJTVFlMRV9MSUJfQjJTVFlMRV9UWVBFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9UWVBFU19ICgojaW5jbHVkZSA8YnN0eWxlL3R5cGVzLmg+CgovLyBUT0RPOiBTZWFyY2ggdHlwZXMgaW4gcGFyZW50IHNjb3Blcy4KbmFtZXNwYWNlIGIyc3R5bGUgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjpiaWd1aW50IGJpZ3VpbnQ7CnR5cGVkZWYgOjpsb25nIGxvbmc7CnR5cGVkZWYgOjppbnQgaW50Owp0eXBlZGVmIDo6Ynl0ZSBieXRlOwp0eXBlZGVmIDo6dWZsb2F0IHVmbG9hdDsKCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVFlQRVNfSAoQAAAAYjJzdHlsZS91ZmxvYXQuaFIPAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9CMlNUWUxFX1VGTE9BVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfQjJTVFlMRV9VRkxPQVRfSAoKI2luY2x1ZGUgPGIyc3R5bGUvbG9hZGVkX21ldGhvZC5oPgojaW5jbHVkZSA8YjJzdHlsZS9zdGRpby5oPgojaW5jbHVkZSA8YjJzdHlsZS9zdHIuaD4KI2luY2x1ZGUgPGIyc3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKCmJvb2wgZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2VxdWFsIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9lcXVhbCBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBub3RfZXF1YWwodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2VxdWFsIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9lcXVhbCBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIG5vdChyZXN1bHQpOwp9Cgpib29sIGdyZWF0ZXJfdGhhbih1ZmxvYXQgaSwgdWZsb2F0IGopIHsKICBib29sIHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZmxvYXRfbW9yZSByZXN1bHQgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZmxvYXRfbW9yZSBiMnN0eWxlX19yZXN1bHQgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIHJlc3VsdDsKfQoKYm9vbCBsZXNzX3RoYW4odWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgYm9vbCByZXN1bHQ7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2xlc3MgcmVzdWx0IGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X2xlc3MgYjJzdHlsZV9fcmVzdWx0IGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiByZXN1bHQ7Cn0KCnVmbG9hdCBhZGQodWZsb2F0IGksIHVmbG9hdCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X2FkZCBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X2FkZCBiMnN0eWxlX19pIGIyc3R5bGVfX2kgYjJzdHlsZV9faiI7CiNlbmRpZgogIHJldHVybiBpOwp9Cgp1ZmxvYXQgbWludXModWZsb2F0IGksIHVmbG9hdCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X3N1YnRyYWN0IGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZmxvYXRfc3VidHJhY3QgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKdWZsb2F0IG11bHRpcGx5KHVmbG9hdCBpLCB1ZmxvYXQgaikgewojaWZkZWYgQjNTVFlMRQogIGxvZ2ljICJmbG9hdF9tdWx0aXBseSBpIGkgaiI7CiNlbHNlCiAgbG9naWMgImZsb2F0X211bHRpcGx5IGIyc3R5bGVfX2kgYjJzdHlsZV9faSBiMnN0eWxlX19qIjsKI2VuZGlmCiAgcmV0dXJuIGk7Cn0KCnVmbG9hdCBkaXZpZGUodWZsb2F0IGksIHVmbG9hdCBqKSB7CiAgdWZsb2F0IHJlc3VsdDsKI2lmZGVmIEIzU1RZTEUKICBsb2dpYyAiZmxvYXRfZGl2aWRlIHJlc3VsdCBpIGoiOwojZWxzZQogIGxvZ2ljICJmbG9hdF9kaXZpZGUgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gcmVzdWx0Owp9Cgp1ZmxvYXQgcG93ZXIodWZsb2F0IGksIHVmbG9hdCBqKSB7CiNpZmRlZiBCM1NUWUxFCiAgbG9naWMgImZsb2F0X3Bvd2VyIGkgaSBqIjsKI2Vsc2UKICBsb2dpYyAiZmxvYXRfcG93ZXIgYjJzdHlsZV9faSBiMnN0eWxlX19pIGIyc3R5bGVfX2oiOwojZW5kaWYKICByZXR1cm4gaTsKfQoKYm9vbCBncmVhdGVyX29yX2VxdWFsKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIHJldHVybiBvcihncmVhdGVyX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKYm9vbCBsZXNzX29yX2VxdWFsKHVmbG9hdCBpLCB1ZmxvYXQgaikgewogIHJldHVybiBvcihsZXNzX3RoYW4oaSwgaiksIGVxdWFsKGksIGopKTsKfQoKdm9pZCBzdGRfb3V0KHVmbG9hdCBpKSB7CiAgc3RkX291dCh1ZmxvYXRfdG9fc3RyKGkpKTsKfQoKdm9pZCBzdGRfZXJyKHVmbG9hdCBpKSB7CiAgc3RkX2Vycih1ZmxvYXRfdG9fc3RyKGkpKTsKfQoKdWZsb2F0IHNlbGZfaW5jX3Bvc3QodWZsb2F0JiB4KSB7CiAgdWZsb2F0IHIgPSB4OwoJeCA9IGFkZCh4LCAxLjApOwogIHJldHVybiByOwp9Cgp1ZmxvYXQgc2VsZl9kZWNfcG9zdCh1ZmxvYXQmIHgpIHsKICB1ZmxvYXQgciA9IHg7Cgl4ID0gbWludXMoeCwgMS4wKTsKICByZXR1cm4gcjsKfQoKdWZsb2F0IHNlbGZfaW5jX3ByZSh1ZmxvYXQmIHgpIHsKCXggPSBhZGQoeCwgMS4wKTsKICByZXR1cm4geDsKfQoKdWZsb2F0IHNlbGZfZGVjX3ByZSh1ZmxvYXQmIHgpIHsKCXggPSBtaW51cyh4LCAxLjApOwogIHJldHVybiB4Owp9Cgp2b2lkIHNlbGZfYWRkKHVmbG9hdCYgaSwgdWZsb2F0IGopIHsKICBpID0gYWRkKGksIGopOwp9Cgp2b2lkIHNlbGZfbWludXModWZsb2F0JiBpLCB1ZmxvYXQgaikgewogIGkgPSBtaW51cyhpLCBqKTsKfQoKdm9pZCBzZWxmX211bHRpcGx5KHVmbG9hdCYgaSwgdWZsb2F0IGopIHsKICBpID0gbXVsdGlwbHkoaSwgaik7Cn0KCnZvaWQgc2VsZl9kaXZpZGUodWZsb2F0JiBpLCB1ZmxvYXQgaikgewogIGkgPSBkaXZpZGUoaSwgaik7Cn0KCnZvaWQgc2VsZl9wb3dlcih1ZmxvYXQmIGksIHVmbG9hdCBqKSB7CiAgaSA9IHBvd2VyKGksIGopOwp9CgpuYW1lc3BhY2UgdWZsb2F0IHsKCnR5cGVkZWYgOjpzdHJpbmcgc3RyaW5nOwp0eXBlZGVmIDo6dm9pZCB2b2lkOwp0eXBlZGVmIDo6Ym9vbCBib29sOwp0eXBlZGVmIDo6YmlndWludCBiaWd1aW50Owp0eXBlZGVmIDo6bG9uZyBsb25nOwp0eXBlZGVmIDo6aW50IGludDsKdHlwZWRlZiA6OmJ5dGUgYnl0ZTsKdHlwZWRlZiA6OnVmbG9hdCB1ZmxvYXQ7Cgp1ZmxvYXQgZnJvbShiaWd1aW50IGkpIHsKICA6OmIyc3R5bGU6OmxvYWRfbWV0aG9kKCJiaWdfdWludF90b19iaWdfdWRlYyIpOwogIHJldHVybiA6OmIyc3R5bGU6OmV4ZWN1dGVfbG9hZGVkX21ldGhvZDxiaWd1aW50LCB1ZmxvYXQ+KGkpOwp9Cgp1ZmxvYXQgZnJvbShpbnQgaSkgewogIHJldHVybiBmcm9tKDo6dG9fYmlndWludChpKSk7Cn0KCnVmbG9hdCBmcm9tKGxvbmcgaSkgewogIHJldHVybiBmcm9tKDo6dG9fYmlndWludChpKSk7Cn0KCnVmbG9hdCBmcmFjdGlvbihiaWd1aW50IG4sIGJpZ3VpbnQgZCkgewogIHVmbG9hdCByZXN1bHQgPSBmcm9tKG4pOwogIHVmbG9hdCB1ZCA9IGZyb20oZCk7CiAgcmV0dXJuIDo6YjJzdHlsZTo6ZGl2aWRlKHJlc3VsdCwgdWQpOwp9Cgp1ZmxvYXQgZnJhY3Rpb24oYmlndWludCBuLCBpbnQgZCkgewogIHJldHVybiBmcmFjdGlvbihuLCA6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp1ZmxvYXQgZnJhY3Rpb24oYmlndWludCBuLCBsb25nIGQpIHsKICByZXR1cm4gZnJhY3Rpb24obiwgOjp0b19iaWd1aW50KGQpKTsKfQoKdWZsb2F0IGZyYWN0aW9uKGludCBuLCBiaWd1aW50IGQpIHsKICByZXR1cm4gZnJhY3Rpb24oOjp0b19iaWd1aW50KG4pLCBkKTsKfQoKdWZsb2F0IGZyYWN0aW9uKGxvbmcgbiwgYmlndWludCBkKSB7CiAgcmV0dXJuIGZyYWN0aW9uKDo6dG9fYmlndWludChuKSwgZCk7Cn0KCnVmbG9hdCBmcmFjdGlvbihpbnQgbiwgaW50IGQpIHsKICByZXR1cm4gZnJhY3Rpb24oOjp0b19iaWd1aW50KG4pLCA6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp1ZmxvYXQgZnJhY3Rpb24obG9uZyBuLCBsb25nIGQpIHsKICByZXR1cm4gZnJhY3Rpb24oOjp0b19iaWd1aW50KG4pLCA6OnRvX2JpZ3VpbnQoZCkpOwp9Cgp9ICAvLyBuYW1lc3BhY2UgdWZsb2F0Cgp9ICAvLyBuYW1lc3BhY2UgYjJzdHlsZQojZW5kaWYgIC8vIEIyU1RZTEVfTElCX0IyU1RZTEVfVUZMT0FUX0gKCwAAAHN0ZC90eXBlcy5oXQEAAO+7vwojaWZuZGVmIEIyU1RZTEVfTElCX1NURF9UWVBFU19ICiNkZWZpbmUgQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKCiNpbmNsdWRlIDxic3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBzdGQgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjpiaWd1aW50IGJpZ3VpbnQ7CnR5cGVkZWYgOjpsb25nIGxvbmc7CnR5cGVkZWYgOjppbnQgaW50Owp0eXBlZGVmIDo6Ynl0ZSBieXRlOwp0eXBlZGVmIDo6dWZsb2F0IHVmbG9hdDsKCn0gIC8vIG5hbWVzcGFjZSBzdGQKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfU1REX1RZUEVTX0gKAAAAc3RkL3ZlY3RvchkFAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9TVERfVkVDVE9SCiNkZWZpbmUgQjJTVFlMRV9MSUJfU1REX1ZFQ1RPUgoKI2luY2x1ZGUgPGIyc3R5bGUuaD4KI2luY2x1ZGUgPGFzc2VydC5oPgojaW5jbHVkZSA8YjJzdHlsZS9oZWFwX3B0ci5oPgojaW5jbHVkZSA8c3RkL3R5cGVzLmg+CgpuYW1lc3BhY2Ugc3RkIHsKCnRlbXBsYXRlIDxUPgpjbGFzcyB2ZWN0b3IgewogIDo6YjJzdHlsZTo6aGVhcF9wdHI8VD4gX2E7CiAgaW50IF9zOwoKICBpbnQgc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLl9zOwogIH0KCiAgaW50IGNhcGFjaXR5KCkgewogICAgcmV0dXJuIHRoaXMuX2Euc2l6ZSgpOwogIH0KCiAgVCBnZXQoaW50IGluZGV4KSB7CiAgICA6OmFzc2VydChpbmRleCA+PSAwLCAiZ2V0Iik7CiAgICA6OmFzc2VydChpbmRleCA8IHRoaXMuc2l6ZSgpLCAiZ2V0Iik7CiAgICByZXR1cm4gdGhpcy5fYS5nZXQoaW5kZXgpOwogIH0KCiAgdm9pZCBzZXQoaW50IGluZGV4LCBUIHYpIHsKICAgIDo6YXNzZXJ0KGluZGV4ID49IDAsICJzZXQiKTsKICAgIDo6YXNzZXJ0KGluZGV4IDwgdGhpcy5zaXplKCksICJzZXQiKTsKICAgIHRoaXMuX2Euc2V0KGluZGV4LCB2KTsKICB9CgogIHZvaWQgZGVzdHJ1Y3QoKSB7CiAgICB0aGlzLl9hLmRlc3RydWN0KCk7CiAgfQoKICB2b2lkIHJlc2VydmUoaW50IHNpemUpIHsKICAgIDo6YjJzdHlsZTo6aGVhcF9wdHI8VD4geChzaXplKTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGhpcy5zaXplKCk7IGkrKykgewogICAgICB4LnNldChpLCB0aGlzLmdldChpKSk7CiAgICB9Cgl0aGlzLmRlc3RydWN0KCk7CiAgICB0aGlzLl9hID0geDsKCXgucmVsZWFzZSgpOwogIH0KCiAgdm9pZCBjb25zdHJ1Y3QoaW50IHNpemUpIHsKICAgIHRoaXMucmVzZXJ2ZShzaXplKTsKICB9CgogIHZvaWQgY29uc3RydWN0KCkgewogICAgdGhpcy5jb25zdHJ1Y3QoNCk7CiAgfQoKICB2b2lkIHB1c2hfYmFjayhUIHYpIHsKICAgIGlmICh0aGlzLnNpemUoKSA9PSB0aGlzLmNhcGFjaXR5KCkpIHsKICAgICAgdGhpcy5yZXNlcnZlKHRoaXMuY2FwYWNpdHkoKSA8PCAxKTsKICAgIH0KICAgIHRoaXMuX3MrKzsKICAgIHRoaXMuc2V0KHRoaXMuc2l6ZSgpIC0gMSwgdik7CiAgfQoKICB2b2lkIHBvcF9iYWNrKCkgewogICAgOjphc3NlcnQodGhpcy5zaXplKCkgPiAwLCAicG9wX2JhY2siKTsKICAgIHRoaXMuX3MtLTsKICB9CgogIHZvaWQgY2xlYXIoKSB7CiAgICB0aGlzLl9zID0gMDsKICB9Cn07Cgp9ICAvLyBuYW1lc3BhY2Ugc3RkCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX1NURF9WRUNUT1IQAAAAdGVzdGluZy9hc3NlcnQuaCAFAADvu78KI2lmbmRlZiBCMlNUWUxFX0xJQl9URVNUSU5HX0FTU0VSVF9ICiNkZWZpbmUgQjJTVFlMRV9MSUJfVEVTVElOR19BU1NFUlRfSAoKI2luY2x1ZGUgPGIyc3R5bGUvc3RkaW8uaD4KI2luY2x1ZGUgPGIyc3R5bGUvdG9fc3RyLmg+CiNpbmNsdWRlIDxic3R5bGUuaD4KI2luY2x1ZGUgPGJzdHlsZS9zdHIuaD4KI2luY2x1ZGUgPHRlc3RpbmcvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKbmFtZXNwYWNlIHRlc3RpbmcgewoKaW50IF9hc3NlcnRpb25fY291bnQgPSAwOwoKLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gdGVzdCB0aGUgX19GSUxFX18gaW4gaW5jbHVkZWQgZmlsZXMuCnN0cmluZyBhc3NlcnRfX0ZJTEVfXygpIHsKICByZXR1cm4gX19GSUxFX187Cn0KCnZvaWQgYXNzZXJ0X3RydWUoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgX2Fzc2VydGlvbl9jb3VudCsrOwogIHN0cmluZyBwcmVmaXg7CiAgaWYgKHYpIHsKICAgIHByZWZpeCA9ICJTdWNjZXNzOiAiOwogIH0gZWxzZSB7CiAgICBwcmVmaXggPSAiRmFpbHVyZTogIjsKICB9CiAgOjpiMnN0eWxlOjpzdGRfb3V0KHByZWZpeCk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KG1zZyk7CiAgOjpiMnN0eWxlOjpzdGRfb3V0KCJcbiIpOwp9Cgp2b2lkIGFzc2VydF90cnVlKGJvb2wgdikgewogIGFzc2VydF90cnVlKHYsICJubyBleHRyYSBpbmZvcm1hdGlvbi4iKTsKfQoKdm9pZCBhc3NlcnRfZmFsc2UoYm9vbCB2LCBzdHJpbmcgbXNnKSB7CiAgYXNzZXJ0X3RydWUoIXYsIG1zZyk7Cn0KCnZvaWQgYXNzZXJ0X2ZhbHNlKGJvb2wgdikgewogIGFzc2VydF90cnVlKCF2KTsKfQoKLyoKVE9ETzogTWFrZSB0aGlzIHdvcmsuIEN1cnJlbnRseSBhc3NlcnRfZXF1YWxfXzIgY29uZmxpY3RzIHdpdGggdGhlIGZvbGxvd2luZyBvbmUuCnRlbXBsYXRlIDxULCBUMj4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUMiB0Miwgc3RyaW5nIG1zZykgewogIGFzc2VydF90cnVlKHQgPT0gdDIsIG1zZyk7Cn0KKi8KCnRlbXBsYXRlIDxULCBUMj4Kdm9pZCBhc3NlcnRfZXF1YWwoVCB0LCBUMiB0MikgewogIGFzc2VydF90cnVlKHQgPT0gdDIsIDo6c3RyX2NvbmNhdCg6OmIyc3R5bGU6OnRvX3N0cih0KSwgIiAhPSAiLCA6OmIyc3R5bGU6OnRvX3N0cih0MikpKTsKfQoKdGVtcGxhdGUgPFQ+CnZvaWQgYXNzZXJ0X2VxdWFsKFQgdCwgVCB0MikgewogIGFzc2VydF9lcXVhbDxULCBUPih0LCB0Mik7Cn0KCn0gIC8vIG5hbWVzcGFjZSB0ZXN0aW5nCn0gIC8vIG5hbWVzcGFjZSBiMnN0eWxlCgojZW5kaWYgIC8vIEIyU1RZTEVfTElCX1RFU1RJTkdfQVNTRVJUX0gKDwAAAHRlc3RpbmcvdHlwZXMuaK4BAAAKI2lmbmRlZiBCMlNUWUxFX0xJQl9URVNUSU5HX1RZUEVTX0gKI2RlZmluZSBCMlNUWUxFX0xJQl9URVNUSU5HX1RZUEVTX0gKCiNpbmNsdWRlIDxic3R5bGUvdHlwZXMuaD4KCm5hbWVzcGFjZSBiMnN0eWxlIHsKbmFtZXNwYWNlIHRlc3RpbmcgewoKdHlwZWRlZiA6OnN0cmluZyBzdHJpbmc7CnR5cGVkZWYgOjp2b2lkIHZvaWQ7CnR5cGVkZWYgOjpib29sIGJvb2w7CnR5cGVkZWYgOjppbnQgaW50OwoKLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gdGVzdCB0aGUgX19GSUxFX18gaW4gaW5jbHVkZWQgZmlsZXMuCnN0cmluZyB0eXBlc19fRklMRV9fKCkgewogIHJldHVybiBfX0ZJTEVfXzsKfQoKfSAgLy8gbmFtZXNwYWNlIHRlc3RpbmcKfSAgLy8gbmFlbXNwYWNlIGIyc3R5bGUKCiNlbmRpZiAgLy8gQjJTVFlMRV9MSUJfVEVTVElOR19UWVBFU19I"
        ))
End Class
